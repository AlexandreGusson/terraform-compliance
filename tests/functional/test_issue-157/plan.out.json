{"format_version":"0.1","terraform_version":"0.12.8","variables":{"SSH_PRI":{"value":"some_private_ssh_key"},"SSH_PUB":{"value":"some_public_ssh_key"},"application":{"value":"156"},"aws_region":{"value":"eu-west-1"},"environment":{"value":"test"},"project":{"value":"terraform-compliance"}},"planned_values":{"outputs":{"public_ip":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_instance.demo-prod-AppOne","mode":"managed","type":"aws_instance","name":"demo-prod-AppOne","provider_name":"aws","schema_version":1,"values":{"ami":"ami-04b762b4289fba92b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"iam_instance_profile":"EC2-S3-READONLY","instance_initiated_shutdown_behavior":null,"instance_type":"t2.micro","key_name":"terraform-compliance-test-156-SSHKey-GitLab","monitoring":null,"source_dest_check":true,"tags":{"Env2":"Prod","Name":"terraform-compliance-test-156"},"timeouts":null,"user_data":"38fd5373349ba0f2942fee78c6caa463d6e21645","user_data_base64":null}},{"address":"aws_key_pair.deployer","mode":"managed","type":"aws_key_pair","name":"deployer","provider_name":"aws","schema_version":1,"values":{"key_name":"terraform-compliance-test-156-SSHKey-GitLab","key_name_prefix":null,"public_key":"some_public_ssh_key"}},{"address":"aws_security_group.instance","mode":"managed","type":"aws_security_group","name":"instance","provider_name":"aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["1.2.3.4/32"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["1.2.3.4/32"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"terraform-example-instance","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"allow_all"},"timeouts":null}}]}},"resource_changes":[{"address":"aws_instance.demo-prod-AppOne","mode":"managed","type":"aws_instance","name":"demo-prod-AppOne","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-04b762b4289fba92b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"iam_instance_profile":"EC2-S3-READONLY","instance_initiated_shutdown_behavior":null,"instance_type":"t2.micro","key_name":"terraform-compliance-test-156-SSHKey-GitLab","monitoring":null,"source_dest_check":true,"tags":{"Env2":"Prod","Name":"terraform-compliance-test-156"},"timeouts":null,"user_data":"38fd5373349ba0f2942fee78c6caa463d6e21645","user_data_base64":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"network_interface":true,"network_interface_id":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"security_groups":true,"subnet_id":true,"tags":{},"tenancy":true,"volume_tags":true,"vpc_security_group_ids":true}}},{"address":"aws_key_pair.deployer","mode":"managed","type":"aws_key_pair","name":"deployer","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"key_name":"terraform-compliance-test-156-SSHKey-GitLab","key_name_prefix":null,"public_key":"some_public_ssh_key"},"after_unknown":{"fingerprint":true,"id":true}}},{"address":"aws_security_group.instance","mode":"managed","type":"aws_security_group","name":"instance","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["1.2.3.4/32"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["1.2.3.4/32"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"terraform-example-instance","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"allow_all"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"owner_id":true,"tags":{},"vpc_id":true}}}],"output_changes":{"public_ip":{"actions":["create"],"before":null,"after_unknown":true}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"region":{"references":["var.aws_region"]}}}},"root_module":{"outputs":{"public_ip":{"expression":{"references":["aws_instance.demo-prod-AppOne"]},"description":"The public IP of the web server"}},"resources":[{"address":"aws_instance.demo-prod-AppOne","mode":"managed","type":"aws_instance","name":"demo-prod-AppOne","provider_config_key":"aws","provisioners":[{"type":"file","expressions":{"destination":{"constant_value":"/tmp/index.php"},"source":{"constant_value":"./app/index.php"}}}],"expressions":{"ami":{"constant_value":"ami-04b762b4289fba92b"},"iam_instance_profile":{"constant_value":"EC2-S3-READONLY"},"instance_type":{"constant_value":"t2.micro"},"key_name":{"references":["var.project","var.environment","var.application"]},"tags":{"references":["var.project","var.environment","var.application"]},"user_data":{"constant_value":"#!/bin/bash\nyum update -y\namazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2\nyum install -y httpd mariadb-server\nsystemctl start httpd\nsystemctl enable httpd\nusermod -a -G apache ec2-user\nchown -R ec2-user:apache /var/www\nchmod 2775 /var/www\nfind /var/www -type d -exec chmod 2775 {} \\;\nfind /var/www -type f -exec chmod 0664 {} \\;\necho \"\u003c?php phpinfo(); ?\u003e\" \u003e /var/www/html/phpinfo.php\ncat /tmp/index.php \u003e /var/www/html/index.php\n"},"vpc_security_group_ids":{"references":["aws_security_group.instance"]}},"schema_version":1},{"address":"aws_key_pair.deployer","mode":"managed","type":"aws_key_pair","name":"deployer","provider_config_key":"aws","expressions":{"key_name":{"references":["var.project","var.environment","var.application"]},"public_key":{"references":["var.SSH_PUB"]}},"schema_version":1},{"address":"aws_security_group.instance","mode":"managed","type":"aws_security_group","name":"instance","provider_config_key":"aws","expressions":{"name":{"constant_value":"terraform-example-instance"},"tags":{"constant_value":{"Name":"allow_all"}}},"schema_version":1}],"variables":{"SSH_PRI":{"default":"some_private_ssh_key"},"SSH_PUB":{"default":"some_public_ssh_key"},"application":{"default":"156"},"aws_region":{"default":"eu-west-1"},"environment":{"default":"test"},"project":{"default":"terraform-compliance"}}}}}
