{"format_version":"0.1","terraform_version":"0.12.5","planned_values":{"root_module":{"resources":[{"address":"aws_api_gateway_authorizer.cognito","mode":"managed","type":"aws_api_gateway_authorizer","name":"cognito","provider_name":"aws","schema_version":0,"values":{"authorizer_credentials":null,"authorizer_result_ttl_in_seconds":null,"authorizer_uri":null,"identity_source":"method.request.header.Authorization","identity_validation_expression":null,"name":"cognito","provider_arns":null,"rest_api_id":"wkr33higc8","type":"COGNITO_USER_POOLS"}},{"address":"aws_api_gateway_rest_api.base-api-gw","mode":"managed","type":"aws_api_gateway_rest_api","name":"base-api-gw","provider_name":"aws.primary","schema_version":0,"values":{"api_key_source":"HEADER","binary_media_types":[],"body":null,"created_date":"2019-06-10T11:53:04Z","description":"","endpoint_configuration":[{"types":["EDGE"]}],"execution_arn":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","id":"wkr33higc8","minimum_compression_size":-1,"name":"BaseApiGW","policy":"","root_resource_id":"e5z2xvi6z0"}},{"address":"aws_athena_database.centrallogging","mode":"managed","type":"aws_athena_database","name":"centrallogging","provider_name":"aws","schema_version":0,"values":{"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","encryption_configuration":[],"force_destroy":false,"id":"centrallogging","name":"centrallogging"}},{"address":"aws_glue_catalog_table.aws_glue_catalog_table","mode":"managed","type":"aws_glue_catalog_table","name":"aws_glue_catalog_table","provider_name":"aws","schema_version":0,"values":{"catalog_id":"885215942479","database_name":"centrallogging","description":"","id":"885215942479:centrallogging:testTable","name":"testtable","owner":"","parameters":{"EXTERNAL":"TRUE"},"partition_keys":[{"comment":"","name":"year","type":"int"},{"comment":"","name":"month","type":"int"},{"comment":"","name":"day","type":"int"},{"comment":"","name":"hour","type":"int"}],"retention":0,"storage_descriptor":[{"bucket_columns":[],"columns":[{"comment":"","name":"level","type":"string"},{"comment":"","name":"loggername","type":"string"},{"comment":"","name":"message","type":"string"},{"comment":"","name":"rid","type":"string"},{"comment":"","name":"env","type":"string"},{"comment":"","name":"sid","type":"string"},{"comment":"","name":"client","type":"string"},{"comment":"","name":"function","type":"string"},{"comment":"","name":"timestamp","type":"string"},{"comment":"","name":"duration","type":"string"},{"comment":"","name":"status","type":"string"},{"comment":"","name":"method","type":"string"},{"comment":"","name":"uri","type":"string"}],"compressed":false,"input_format":"","location":"s3://edf-cloudwatch-from-firehose-control-plane-885215942479/baseFolder","number_of_buckets":0,"output_format":"","parameters":{},"ser_de_info":[{"name":"central-logs","parameters":{"ignore_malformed_json":"true","serialization.format":"1"},"serialization_library":"org.openx.data.jsonserde.JsonSerDe"}],"skewed_info":[],"sort_columns":[],"stored_as_sub_directories":false}],"table_type":"EXTERNAL_TABLE","view_expanded_text":"","view_original_text":""}},{"address":"aws_lambda_function.lambda_processor","mode":"managed","type":"aws_lambda_function","name":"lambda_processor","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor","dead_letter_config":[],"description":"","environment":[],"filename":"exports.zip","function_name":"firehose_lambda_processor","handler":"exports.handler","id":"firehose_lambda_processor","invoke_arn":"arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor/invocations","kms_key_arn":"","last_modified":"2019-07-29T13:28:46.624+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","runtime":"python3.6","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"414nVCRNv5LrH7TsJH0/Ssap5wgXf8jMhpM6FH/gkdI=","source_code_size":2734,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"Lambda Function","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]}},{"address":"aws_sns_topic.apiAlarms-primary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-primary","provider_name":"aws.primary","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:185183891841:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"185183891841\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}}},{"address":"aws_sns_topic.apiAlarms-secondary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-secondary","provider_name":"aws.secondary","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:697138381919:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"697138381919\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}}},{"address":"aws_ssm_parameter.authorizor_id","mode":"managed","type":"aws_ssm_parameter","name":"authorizor_id","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":null,"description":null,"name":"/edf/rap/backend/api-gw/authorizor-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String"}},{"address":"aws_ssm_parameter.base-api-gw-execution-arn","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-execution-arn","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/execution-arn","description":"","id":"/edf/rap/backend/api-gw/execution-arn","key_id":"","name":"/edf/rap/backend/api-gw/execution-arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","version":1}},{"address":"aws_ssm_parameter.base-api-gw-rest-api-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-id","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-id","description":"","id":"/edf/rap/backend/api-gw/rest-api-id","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"wkr33higc8","version":1}},{"address":"aws_ssm_parameter.base-api-gw-rest-api-name","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-name","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-name","description":"","id":"/edf/rap/backend/api-gw/rest-api-name","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-name","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"BaseApiGW","version":1}},{"address":"aws_ssm_parameter.base-api-gw-root-resource-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-root-resource-id","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/root-resource-id","description":"","id":"/edf/rap/backend/api-gw/root-resource-id","key_id":"","name":"/edf/rap/backend/api-gw/root-resource-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"e5z2xvi6z0","version":1}},{"address":"aws_ssm_parameter.primary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"primary-pinpoint-application-id","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"2a945061a3434784a7641b9bbc7c8cce","version":2}},{"address":"aws_ssm_parameter.secondary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"secondary-pinpoint-application-id","provider_name":"aws.secondary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"5ca7d749a2ad42028adbca8d672332ce","version":2}},{"address":"aws_ssm_parameter.sns-topic-arn-primary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-primary","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","version":1}},{"address":"aws_ssm_parameter.sns-topic-arn-secondary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-secondary","provider_name":"aws.secondary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","version":1}}],"child_modules":[{"resources":[{"address":"module.aws-pinpoint-primary.aws_pinpoint_app.this","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"2a945061a3434784a7641b9bbc7c8cce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"thor.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]}},{"address":"module.aws-pinpoint-primary.aws_pinpoint_email_channel.email","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_name":"aws.primary","schema_version":0,"values":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","enabled":true,"from_address":"glow@thor.rap.lucidus.io","id":"2a945061a3434784a7641b9bbc7c8cce","identity":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint"}}],"address":"module.aws-pinpoint-primary","child_modules":[{"resources":[{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","description":"Policy for rap primary pinpoint","id":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","name":"policy-rap-primary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:185183891841:*\"\n    }\n  ]\n}"}},{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-primary-pinpoint","max_session_duration":3600,"name":"role-rap-primary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-primary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROASWHOR6GAQB2XWBVEJ"}},{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws.primary","schema_version":0,"values":{"id":"role-rap-primary-pinpoint-20190710102858917800000001","policy_arn":"arn:aws:iam::185183891841:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-primary-pinpoint"}},{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws.primary","schema_version":0,"values":{"id":"role-rap-primary-pinpoint-20190710102859512400000002","policy_arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","role":"role-rap-primary-pinpoint"}}],"address":"module.aws-pinpoint-primary.module.iam-role"}]},{"resources":[{"address":"module.aws-pinpoint-secondary.aws_pinpoint_app.this","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"5ca7d749a2ad42028adbca8d672332ce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"loki.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]}},{"address":"module.aws-pinpoint-secondary.aws_pinpoint_email_channel.email","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_name":"aws.secondary","schema_version":0,"values":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","enabled":true,"from_address":"glow@loki.rap.lucidus.io","id":"5ca7d749a2ad42028adbca8d672332ce","identity":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint"}}],"address":"module.aws-pinpoint-secondary","child_modules":[{"resources":[{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","description":"Policy for rap secondary pinpoint","id":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","name":"policy-rap-secondary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:697138381919:*\"\n    }\n  ]\n}"}},{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-secondary-pinpoint","max_session_duration":3600,"name":"role-rap-secondary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-secondary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA2EUFPQRPUIQZYMZWB"}},{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws.secondary","schema_version":0,"values":{"id":"role-rap-secondary-pinpoint-20190710102859011400000001","policy_arn":"arn:aws:iam::697138381919:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-secondary-pinpoint"}},{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws.secondary","schema_version":0,"values":{"id":"role-rap-secondary-pinpoint-20190710102859730400000002","policy_arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","role":"role-rap-secondary-pinpoint"}}],"address":"module.aws-pinpoint-secondary.module.iam-role"}]},{"resources":[{"address":"module.aws-ses-primary.aws_route53_record.dkim_record[0]","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":0,"provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","records":["pm6m6swd2vgw4viwsstdorudgkibrxux.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"}},{"address":"module.aws-ses-primary.aws_route53_record.dkim_record[1]","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":1,"provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","records":["xsens4ilpqgd3zlujas7od57bxivxpjq.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"}},{"address":"module.aws-ses-primary.aws_route53_record.dkim_record[2]","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":2,"provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","records":["f2vn243xwopltatdg6qlpneqzgfyql7h.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"}},{"address":"module.aws-ses-primary.aws_route53_record.mail_from_mx","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"}},{"address":"module.aws-ses-primary.aws_route53_record.mail_from_txt","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"}},{"address":"module.aws-ses-primary.aws_route53_record.verification_record","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT__amazonses.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.thor.rap.lucidus.io","records":["thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"}},{"address":"module.aws-ses-primary.aws_ses_domain_dkim.this","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"dkim_tokens":["pm6m6swd2vgw4viwsstdorudgkibrxux","xsens4ilpqgd3zlujas7od57bxivxpjq","f2vn243xwopltatdg6qlpneqzgfyql7h"],"domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io"}},{"address":"module.aws-ses-primary.aws_ses_domain_identity.this","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","verification_token":"thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="}},{"address":"module.aws-ses-primary.aws_ses_domain_identity_verification.this","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","timeouts":null}},{"address":"module.aws-ses-primary.aws_ses_domain_mail_from.this","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"behavior_on_mx_failure":"UseDefaultValue","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","mail_from_domain":"bounce.thor.rap.lucidus.io"}}],"address":"module.aws-ses-primary"},{"resources":[{"address":"module.aws-ses-secondary.aws_route53_record.dkim_record[0]","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":0,"provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","records":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"}},{"address":"module.aws-ses-secondary.aws_route53_record.dkim_record[1]","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":1,"provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","records":["4bqlchp3iwqjoi3hf35pzszutsmvdwyi.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"}},{"address":"module.aws-ses-secondary.aws_route53_record.dkim_record[2]","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":2,"provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","records":["fkwsdhserncprsbgtneoylxper5xdesa.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"}},{"address":"module.aws-ses-secondary.aws_route53_record.mail_from_mx","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"}},{"address":"module.aws-ses-secondary.aws_route53_record.mail_from_txt","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"}},{"address":"module.aws-ses-secondary.aws_route53_record.verification_record","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2__amazonses.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.loki.rap.lucidus.io","records":["a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"}},{"address":"module.aws-ses-secondary.aws_ses_domain_dkim.this","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"dkim_tokens":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta","4bqlchp3iwqjoi3hf35pzszutsmvdwyi","fkwsdhserncprsbgtneoylxper5xdesa"],"domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io"}},{"address":"module.aws-ses-secondary.aws_ses_domain_identity.this","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","verification_token":"a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="}},{"address":"module.aws-ses-secondary.aws_ses_domain_identity_verification.this","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","timeouts":null}},{"address":"module.aws-ses-secondary.aws_ses_domain_mail_from.this","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"behavior_on_mx_failure":"UseDefaultValue","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","mail_from_domain":"bounce.loki.rap.lucidus.io"}}],"address":"module.aws-ses-secondary"},{"resources":[{"address":"module.firehose-for-cloudwatch.aws_cloudwatch_log_group.firehose_s3_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"firehose_s3_log_group","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:*","id":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","kms_key_id":"","name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name_prefix":null,"retention_in_days":30,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}}},{"address":"module.firehose-for-cloudwatch.aws_cloudwatch_log_stream.firehose_s3_log_stream","mode":"managed","type":"aws_cloudwatch_log_stream","name":"firehose_s3_log_stream","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:log-stream:DeliveryStream","id":"DeliveryStream","log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name":"DeliveryStream"}},{"address":"module.firehose-for-cloudwatch.aws_kinesis_firehose_delivery_stream.this","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"this","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","destination":"extended_s3","destination_id":"destinationId-000000000001","elasticsearch_configuration":[],"extended_s3_configuration":[{"bucket_arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","buffer_interval":60,"buffer_size":5,"cloudwatch_logging_options":[{"enabled":true,"log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","log_stream_name":"DeliveryStream"}],"compression_format":"UNCOMPRESSED","data_format_conversion_configuration":[],"error_output_prefix":"myErrorPrefix/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/!{firehose:error-output-type}","kms_key_arn":"","prefix":"baseFolder/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/","processing_configuration":[],"role_arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","s3_backup_configuration":[],"s3_backup_mode":"Disabled"}],"id":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","kinesis_source_configuration":[],"name":"edf-rap-firehose-cloudwatch-control-plane-delivery-stream","redshift_configuration":[],"s3_configuration":[],"splunk_configuration":[],"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"version_id":"1"}}],"address":"module.firehose-for-cloudwatch"},{"resources":[{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","description":"Policy for rap control-plane cloudwatch-to-firehose","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","name":"policy-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"firehose:PutRecordBatch\",\n        \"firehose:PutRecord\"\n      ],\n      \"Resource\": \"arn:aws:firehose:*:*:**\"\n    }\n  ]\n}"}},{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-cloudwatch-to-firehose","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"logs.eu-west-1.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-cloudwatch-to-firehose","max_session_duration":3600,"name":"role-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-cloudwatch-to-firehose","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H7TYBO2QGQ"}},{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839090500000003","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-cloudwatch-to-firehose"}},{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839253000000004","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","role":"role-rap-control-plane-cloudwatch-to-firehose"}}],"address":"module.iam-role-cloudwatch-to-firehose"},{"resources":[{"address":"module.iam-role-firehose-to-lambda.aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","description":"Policy for rap control-plane firehose-to-lambda","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","name":"policy-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"firehose:*\",\n      \"Resource\": \"arn:aws:firehose:*:*:*\"\n    }\n  ]\n}"}},{"address":"module.iam-role-firehose-to-lambda.aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-lambda","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-lambda","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5HSFQCUOGBM"}},{"address":"module.iam-role-firehose-to-lambda.aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839032900000001","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-lambda"}},{"address":"module.iam-role-firehose-to-lambda.aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839312300000006","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","role":"role-rap-control-plane-firehose-to-lambda"}}],"address":"module.iam-role-firehose-to-lambda"},{"resources":[{"address":"module.iam-role-firehose-to-s3.aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","description":"Policy for rap control-plane firehose-to-s3","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","name":"policy-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucket\",\n        \"s3:GetObject\",\n        \"s3:GetBucketLocation\",\n        \"s3:AbortMultipartUpload\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis/*\",\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"lambda:InvokeFunction\",\n        \"lambda:GetFunctionConfiguration\"\n      ],\n      \"Resource\": \"arn:aws:lambda:*:*:*\"\n    }\n  ]\n}"}},{"address":"module.iam-role-firehose-to-s3.aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"firehose.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-s3","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-s3","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H5ABUJ3MZC"}},{"address":"module.iam-role-firehose-to-s3.aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839042300000002","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-s3"}},{"address":"module.iam-role-firehose-to-s3.aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839310200000005","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","role":"role-rap-control-plane-firehose-to-s3"}}],"address":"module.iam-role-firehose-to-s3"},{"resources":[{"address":"module.s3.aws_kms_key.key[0]","mode":"managed","type":"aws_kms_key","name":"key","index":0,"provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:kms:eu-west-1:885215942479:key/26806c51-8c1a-4b85-9116-1ccda3f2a42b","deletion_window_in_days":7,"description":"KMS Key for edf-cloudwatch-from-firehose-control-plane-885215942479 S3 bucket","enable_key_rotation":true,"id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","is_enabled":true,"key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::885215942479:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}}},{"address":"module.s3.aws_s3_bucket.s3_bucket_dev[0]","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket_dev","index":0,"provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","bucket_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.eu-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"hosted_zone_id":"Z1BKCTXD74EZPE","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","lifecycle_rule":[{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-ia","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":180,"storage_class":"STANDARD_IA"}]},{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-glacier","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":365,"storage_class":"GLACIER"}]}],"logging":[],"object_lock_configuration":[],"policy":null,"region":"eu-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","sse_algorithm":"aws:kms"}]}]}],"tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null}},{"address":"module.s3.aws_s3_bucket_public_access_block.public_access_block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"public_access_block","provider_name":"aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","ignore_public_acls":true,"restrict_public_buckets":true}}],"address":"module.s3"}]}},"resource_changes":[{"address":"aws_api_gateway_authorizer.cognito","mode":"managed","type":"aws_api_gateway_authorizer","name":"cognito","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"authorizer_credentials":null,"authorizer_result_ttl_in_seconds":null,"authorizer_uri":null,"identity_source":"method.request.header.Authorization","identity_validation_expression":null,"name":"cognito","provider_arns":null,"rest_api_id":"wkr33higc8","type":"COGNITO_USER_POOLS"},"after_unknown":{"id":true}}},{"address":"aws_api_gateway_rest_api.base-api-gw","mode":"managed","type":"aws_api_gateway_rest_api","name":"base-api-gw","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"api_key_source":"HEADER","binary_media_types":[],"body":null,"created_date":"2019-06-10T11:53:04Z","description":"","endpoint_configuration":[{"types":["EDGE"]}],"execution_arn":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","id":"wkr33higc8","minimum_compression_size":-1,"name":"BaseApiGW","policy":"","root_resource_id":"e5z2xvi6z0"},"after":{"api_key_source":"HEADER","binary_media_types":[],"body":null,"created_date":"2019-06-10T11:53:04Z","description":"","endpoint_configuration":[{"types":["EDGE"]}],"execution_arn":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","id":"wkr33higc8","minimum_compression_size":-1,"name":"BaseApiGW","policy":"","root_resource_id":"e5z2xvi6z0"},"after_unknown":{}}},{"address":"aws_athena_database.centrallogging","mode":"managed","type":"aws_athena_database","name":"centrallogging","provider_name":"aws","change":{"actions":["no-op"],"before":{"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","encryption_configuration":[],"force_destroy":false,"id":"centrallogging","name":"centrallogging"},"after":{"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","encryption_configuration":[],"force_destroy":false,"id":"centrallogging","name":"centrallogging"},"after_unknown":{}}},{"address":"aws_glue_catalog_table.aws_glue_catalog_table","mode":"managed","type":"aws_glue_catalog_table","name":"aws_glue_catalog_table","provider_name":"aws","change":{"actions":["no-op"],"before":{"catalog_id":"885215942479","database_name":"centrallogging","description":"","id":"885215942479:centrallogging:testTable","name":"testtable","owner":"","parameters":{"EXTERNAL":"TRUE"},"partition_keys":[{"comment":"","name":"year","type":"int"},{"comment":"","name":"month","type":"int"},{"comment":"","name":"day","type":"int"},{"comment":"","name":"hour","type":"int"}],"retention":0,"storage_descriptor":[{"bucket_columns":[],"columns":[{"comment":"","name":"level","type":"string"},{"comment":"","name":"loggername","type":"string"},{"comment":"","name":"message","type":"string"},{"comment":"","name":"rid","type":"string"},{"comment":"","name":"env","type":"string"},{"comment":"","name":"sid","type":"string"},{"comment":"","name":"client","type":"string"},{"comment":"","name":"function","type":"string"},{"comment":"","name":"timestamp","type":"string"},{"comment":"","name":"duration","type":"string"},{"comment":"","name":"status","type":"string"},{"comment":"","name":"method","type":"string"},{"comment":"","name":"uri","type":"string"}],"compressed":false,"input_format":"","location":"s3://edf-cloudwatch-from-firehose-control-plane-885215942479/baseFolder","number_of_buckets":0,"output_format":"","parameters":{},"ser_de_info":[{"name":"central-logs","parameters":{"ignore_malformed_json":"true","serialization.format":"1"},"serialization_library":"org.openx.data.jsonserde.JsonSerDe"}],"skewed_info":[],"sort_columns":[],"stored_as_sub_directories":false}],"table_type":"EXTERNAL_TABLE","view_expanded_text":"","view_original_text":""},"after":{"catalog_id":"885215942479","database_name":"centrallogging","description":"","id":"885215942479:centrallogging:testTable","name":"testtable","owner":"","parameters":{"EXTERNAL":"TRUE"},"partition_keys":[{"comment":"","name":"year","type":"int"},{"comment":"","name":"month","type":"int"},{"comment":"","name":"day","type":"int"},{"comment":"","name":"hour","type":"int"}],"retention":0,"storage_descriptor":[{"bucket_columns":[],"columns":[{"comment":"","name":"level","type":"string"},{"comment":"","name":"loggername","type":"string"},{"comment":"","name":"message","type":"string"},{"comment":"","name":"rid","type":"string"},{"comment":"","name":"env","type":"string"},{"comment":"","name":"sid","type":"string"},{"comment":"","name":"client","type":"string"},{"comment":"","name":"function","type":"string"},{"comment":"","name":"timestamp","type":"string"},{"comment":"","name":"duration","type":"string"},{"comment":"","name":"status","type":"string"},{"comment":"","name":"method","type":"string"},{"comment":"","name":"uri","type":"string"}],"compressed":false,"input_format":"","location":"s3://edf-cloudwatch-from-firehose-control-plane-885215942479/baseFolder","number_of_buckets":0,"output_format":"","parameters":{},"ser_de_info":[{"name":"central-logs","parameters":{"ignore_malformed_json":"true","serialization.format":"1"},"serialization_library":"org.openx.data.jsonserde.JsonSerDe"}],"skewed_info":[],"sort_columns":[],"stored_as_sub_directories":false}],"table_type":"EXTERNAL_TABLE","view_expanded_text":"","view_original_text":""},"after_unknown":{}}},{"address":"aws_lambda_function.lambda_processor","mode":"managed","type":"aws_lambda_function","name":"lambda_processor","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor","dead_letter_config":[],"description":"","environment":[],"filename":"exports.zip","function_name":"firehose_lambda_processor","handler":"exports.handler","id":"firehose_lambda_processor","invoke_arn":"arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor/invocations","kms_key_arn":"","last_modified":"2019-07-29T13:28:46.624+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","runtime":"python3.6","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"414nVCRNv5LrH7TsJH0/Ssap5wgXf8jMhpM6FH/gkdI=","source_code_size":2734,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"Lambda Function","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after":{"arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor","dead_letter_config":[],"description":"","environment":[],"filename":"exports.zip","function_name":"firehose_lambda_processor","handler":"exports.handler","id":"firehose_lambda_processor","invoke_arn":"arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor/invocations","kms_key_arn":"","last_modified":"2019-07-29T13:28:46.624+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","runtime":"python3.6","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"414nVCRNv5LrH7TsJH0/Ssap5wgXf8jMhpM6FH/gkdI=","source_code_size":2734,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"Lambda Function","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{}}},{"address":"aws_sns_topic.apiAlarms-primary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-primary","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:185183891841:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"185183891841\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:185183891841:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"185183891841\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after_unknown":{}}},{"address":"aws_sns_topic.apiAlarms-secondary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-secondary","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:697138381919:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"697138381919\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:697138381919:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"697138381919\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after_unknown":{}}},{"address":"aws_ssm_parameter.authorizor_id","mode":"managed","type":"aws_ssm_parameter","name":"authorizor_id","provider_name":"aws.primary","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":null,"name":"/edf/rap/backend/api-gw/authorizor-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String"},"after_unknown":{"arn":true,"id":true,"key_id":true,"tags":{},"value":true,"version":true}}},{"address":"aws_ssm_parameter.base-api-gw-execution-arn","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-execution-arn","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/execution-arn","description":"","id":"/edf/rap/backend/api-gw/execution-arn","key_id":"","name":"/edf/rap/backend/api-gw/execution-arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/execution-arn","description":"","id":"/edf/rap/backend/api-gw/execution-arn","key_id":"","name":"/edf/rap/backend/api-gw/execution-arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","version":1},"after_unknown":{}}},{"address":"aws_ssm_parameter.base-api-gw-rest-api-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-id","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-id","description":"","id":"/edf/rap/backend/api-gw/rest-api-id","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"wkr33higc8","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-id","description":"","id":"/edf/rap/backend/api-gw/rest-api-id","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"wkr33higc8","version":1},"after_unknown":{}}},{"address":"aws_ssm_parameter.base-api-gw-rest-api-name","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-name","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-name","description":"","id":"/edf/rap/backend/api-gw/rest-api-name","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-name","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"BaseApiGW","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-name","description":"","id":"/edf/rap/backend/api-gw/rest-api-name","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-name","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"BaseApiGW","version":1},"after_unknown":{}}},{"address":"aws_ssm_parameter.base-api-gw-root-resource-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-root-resource-id","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/root-resource-id","description":"","id":"/edf/rap/backend/api-gw/root-resource-id","key_id":"","name":"/edf/rap/backend/api-gw/root-resource-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"e5z2xvi6z0","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/root-resource-id","description":"","id":"/edf/rap/backend/api-gw/root-resource-id","key_id":"","name":"/edf/rap/backend/api-gw/root-resource-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"e5z2xvi6z0","version":1},"after_unknown":{}}},{"address":"aws_ssm_parameter.primary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"primary-pinpoint-application-id","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"2a945061a3434784a7641b9bbc7c8cce","version":2},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"2a945061a3434784a7641b9bbc7c8cce","version":2},"after_unknown":{}}},{"address":"aws_ssm_parameter.secondary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"secondary-pinpoint-application-id","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"5ca7d749a2ad42028adbca8d672332ce","version":2},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"5ca7d749a2ad42028adbca8d672332ce","version":2},"after_unknown":{}}},{"address":"aws_ssm_parameter.sns-topic-arn-primary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-primary","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","version":1},"after_unknown":{}}},{"address":"aws_ssm_parameter.sns-topic-arn-secondary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-secondary","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","version":1},"after_unknown":{}}},{"address":"module.aws-pinpoint-primary.aws_pinpoint_app.this","module_address":"module.aws-pinpoint-primary","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"2a945061a3434784a7641b9bbc7c8cce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"thor.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]},"after":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"2a945061a3434784a7641b9bbc7c8cce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"thor.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]},"after_unknown":{}}},{"address":"module.aws-pinpoint-primary.aws_pinpoint_email_channel.email","module_address":"module.aws-pinpoint-primary","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","enabled":true,"from_address":"glow@thor.rap.lucidus.io","id":"2a945061a3434784a7641b9bbc7c8cce","identity":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint"},"after":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","enabled":true,"from_address":"glow@thor.rap.lucidus.io","id":"2a945061a3434784a7641b9bbc7c8cce","identity":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint"},"after_unknown":{}}},{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_policy.default","module_address":"module.aws-pinpoint-primary.module.iam-role","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","description":"Policy for rap primary pinpoint","id":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","name":"policy-rap-primary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:185183891841:*\"\n    }\n  ]\n}"},"after":{"arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","description":"Policy for rap primary pinpoint","id":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","name":"policy-rap-primary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:185183891841:*\"\n    }\n  ]\n}"},"after_unknown":{}}},{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_role.default","module_address":"module.aws-pinpoint-primary.module.iam-role","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-primary-pinpoint","max_session_duration":3600,"name":"role-rap-primary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-primary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROASWHOR6GAQB2XWBVEJ"},"after":{"arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-primary-pinpoint","max_session_duration":3600,"name":"role-rap-primary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-primary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROASWHOR6GAQB2XWBVEJ"},"after_unknown":{}}},{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_role_policy_attachment.edf-enforced","module_address":"module.aws-pinpoint-primary.module.iam-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"id":"role-rap-primary-pinpoint-20190710102858917800000001","policy_arn":"arn:aws:iam::185183891841:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-primary-pinpoint"},"after":{"id":"role-rap-primary-pinpoint-20190710102858917800000001","policy_arn":"arn:aws:iam::185183891841:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-primary-pinpoint"},"after_unknown":{}}},{"address":"module.aws-pinpoint-primary.module.iam-role.aws_iam_role_policy_attachment.inline","module_address":"module.aws-pinpoint-primary.module.iam-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"id":"role-rap-primary-pinpoint-20190710102859512400000002","policy_arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","role":"role-rap-primary-pinpoint"},"after":{"id":"role-rap-primary-pinpoint-20190710102859512400000002","policy_arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","role":"role-rap-primary-pinpoint"},"after_unknown":{}}},{"address":"module.aws-pinpoint-secondary.aws_pinpoint_app.this","module_address":"module.aws-pinpoint-secondary","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"5ca7d749a2ad42028adbca8d672332ce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"loki.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]},"after":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"5ca7d749a2ad42028adbca8d672332ce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"loki.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]},"after_unknown":{}}},{"address":"module.aws-pinpoint-secondary.aws_pinpoint_email_channel.email","module_address":"module.aws-pinpoint-secondary","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","enabled":true,"from_address":"glow@loki.rap.lucidus.io","id":"5ca7d749a2ad42028adbca8d672332ce","identity":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint"},"after":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","enabled":true,"from_address":"glow@loki.rap.lucidus.io","id":"5ca7d749a2ad42028adbca8d672332ce","identity":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint"},"after_unknown":{}}},{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_policy.default","module_address":"module.aws-pinpoint-secondary.module.iam-role","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","description":"Policy for rap secondary pinpoint","id":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","name":"policy-rap-secondary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:697138381919:*\"\n    }\n  ]\n}"},"after":{"arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","description":"Policy for rap secondary pinpoint","id":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","name":"policy-rap-secondary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:697138381919:*\"\n    }\n  ]\n}"},"after_unknown":{}}},{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_role.default","module_address":"module.aws-pinpoint-secondary.module.iam-role","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-secondary-pinpoint","max_session_duration":3600,"name":"role-rap-secondary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-secondary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA2EUFPQRPUIQZYMZWB"},"after":{"arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-secondary-pinpoint","max_session_duration":3600,"name":"role-rap-secondary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-secondary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA2EUFPQRPUIQZYMZWB"},"after_unknown":{}}},{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_role_policy_attachment.edf-enforced","module_address":"module.aws-pinpoint-secondary.module.iam-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"id":"role-rap-secondary-pinpoint-20190710102859011400000001","policy_arn":"arn:aws:iam::697138381919:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-secondary-pinpoint"},"after":{"id":"role-rap-secondary-pinpoint-20190710102859011400000001","policy_arn":"arn:aws:iam::697138381919:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-secondary-pinpoint"},"after_unknown":{}}},{"address":"module.aws-pinpoint-secondary.module.iam-role.aws_iam_role_policy_attachment.inline","module_address":"module.aws-pinpoint-secondary.module.iam-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"id":"role-rap-secondary-pinpoint-20190710102859730400000002","policy_arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","role":"role-rap-secondary-pinpoint"},"after":{"id":"role-rap-secondary-pinpoint-20190710102859730400000002","policy_arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","role":"role-rap-secondary-pinpoint"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_route53_record.dkim_record[0]","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":0,"provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","records":["pm6m6swd2vgw4viwsstdorudgkibrxux.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","records":["pm6m6swd2vgw4viwsstdorudgkibrxux.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_route53_record.dkim_record[1]","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":1,"provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","records":["xsens4ilpqgd3zlujas7od57bxivxpjq.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","records":["xsens4ilpqgd3zlujas7od57bxivxpjq.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_route53_record.dkim_record[2]","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":2,"provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","records":["f2vn243xwopltatdg6qlpneqzgfyql7h.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","records":["f2vn243xwopltatdg6qlpneqzgfyql7h.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_route53_record.mail_from_mx","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_route53_record.mail_from_txt","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_route53_record.verification_record","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT__amazonses.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.thor.rap.lucidus.io","records":["thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT__amazonses.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.thor.rap.lucidus.io","records":["thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_ses_domain_dkim.this","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"dkim_tokens":["pm6m6swd2vgw4viwsstdorudgkibrxux","xsens4ilpqgd3zlujas7od57bxivxpjq","f2vn243xwopltatdg6qlpneqzgfyql7h"],"domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io"},"after":{"dkim_tokens":["pm6m6swd2vgw4viwsstdorudgkibrxux","xsens4ilpqgd3zlujas7od57bxivxpjq","f2vn243xwopltatdg6qlpneqzgfyql7h"],"domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io"},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_ses_domain_identity.this","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","verification_token":"thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="},"after":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","verification_token":"thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_ses_domain_identity_verification.this","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","timeouts":null},"after":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","timeouts":null},"after_unknown":{}}},{"address":"module.aws-ses-primary.aws_ses_domain_mail_from.this","module_address":"module.aws-ses-primary","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_name":"aws.primary","change":{"actions":["no-op"],"before":{"behavior_on_mx_failure":"UseDefaultValue","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","mail_from_domain":"bounce.thor.rap.lucidus.io"},"after":{"behavior_on_mx_failure":"UseDefaultValue","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","mail_from_domain":"bounce.thor.rap.lucidus.io"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_route53_record.dkim_record[0]","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":0,"provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","records":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","records":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_route53_record.dkim_record[1]","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":1,"provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","records":["4bqlchp3iwqjoi3hf35pzszutsmvdwyi.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","records":["4bqlchp3iwqjoi3hf35pzszutsmvdwyi.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_route53_record.dkim_record[2]","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":2,"provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","records":["fkwsdhserncprsbgtneoylxper5xdesa.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","records":["fkwsdhserncprsbgtneoylxper5xdesa.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_route53_record.mail_from_mx","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_route53_record.mail_from_txt","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_route53_record.verification_record","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2__amazonses.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.loki.rap.lucidus.io","records":["a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2__amazonses.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.loki.rap.lucidus.io","records":["a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_ses_domain_dkim.this","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"dkim_tokens":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta","4bqlchp3iwqjoi3hf35pzszutsmvdwyi","fkwsdhserncprsbgtneoylxper5xdesa"],"domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io"},"after":{"dkim_tokens":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta","4bqlchp3iwqjoi3hf35pzszutsmvdwyi","fkwsdhserncprsbgtneoylxper5xdesa"],"domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io"},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_ses_domain_identity.this","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","verification_token":"a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="},"after":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","verification_token":"a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_ses_domain_identity_verification.this","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","timeouts":null},"after":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","timeouts":null},"after_unknown":{}}},{"address":"module.aws-ses-secondary.aws_ses_domain_mail_from.this","module_address":"module.aws-ses-secondary","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_name":"aws.secondary","change":{"actions":["no-op"],"before":{"behavior_on_mx_failure":"UseDefaultValue","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","mail_from_domain":"bounce.loki.rap.lucidus.io"},"after":{"behavior_on_mx_failure":"UseDefaultValue","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","mail_from_domain":"bounce.loki.rap.lucidus.io"},"after_unknown":{}}},{"address":"module.firehose-for-cloudwatch.aws_cloudwatch_log_group.firehose_s3_log_group","module_address":"module.firehose-for-cloudwatch","mode":"managed","type":"aws_cloudwatch_log_group","name":"firehose_s3_log_group","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:*","id":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","kms_key_id":"","name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name_prefix":null,"retention_in_days":30,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:*","id":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","kms_key_id":"","name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name_prefix":null,"retention_in_days":30,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after_unknown":{}}},{"address":"module.firehose-for-cloudwatch.aws_cloudwatch_log_stream.firehose_s3_log_stream","module_address":"module.firehose-for-cloudwatch","mode":"managed","type":"aws_cloudwatch_log_stream","name":"firehose_s3_log_stream","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:log-stream:DeliveryStream","id":"DeliveryStream","log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name":"DeliveryStream"},"after":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:log-stream:DeliveryStream","id":"DeliveryStream","log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name":"DeliveryStream"},"after_unknown":{}}},{"address":"module.firehose-for-cloudwatch.aws_kinesis_firehose_delivery_stream.this","module_address":"module.firehose-for-cloudwatch","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"this","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","destination":"extended_s3","destination_id":"destinationId-000000000001","elasticsearch_configuration":[],"extended_s3_configuration":[{"bucket_arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","buffer_interval":60,"buffer_size":5,"cloudwatch_logging_options":[{"enabled":true,"log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","log_stream_name":"DeliveryStream"}],"compression_format":"UNCOMPRESSED","data_format_conversion_configuration":[],"error_output_prefix":"myErrorPrefix/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/!{firehose:error-output-type}","kms_key_arn":"","prefix":"baseFolder/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/","processing_configuration":[],"role_arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","s3_backup_configuration":[],"s3_backup_mode":"Disabled"}],"id":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","kinesis_source_configuration":[],"name":"edf-rap-firehose-cloudwatch-control-plane-delivery-stream","redshift_configuration":[],"s3_configuration":[],"splunk_configuration":[],"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"version_id":"1"},"after":{"arn":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","destination":"extended_s3","destination_id":"destinationId-000000000001","elasticsearch_configuration":[],"extended_s3_configuration":[{"bucket_arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","buffer_interval":60,"buffer_size":5,"cloudwatch_logging_options":[{"enabled":true,"log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","log_stream_name":"DeliveryStream"}],"compression_format":"UNCOMPRESSED","data_format_conversion_configuration":[],"error_output_prefix":"myErrorPrefix/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/!{firehose:error-output-type}","kms_key_arn":"","prefix":"baseFolder/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/","processing_configuration":[],"role_arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","s3_backup_configuration":[],"s3_backup_mode":"Disabled"}],"id":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","kinesis_source_configuration":[],"name":"edf-rap-firehose-cloudwatch-control-plane-delivery-stream","redshift_configuration":[],"s3_configuration":[],"splunk_configuration":[],"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"version_id":"1"},"after_unknown":{}}},{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_policy.default","module_address":"module.iam-role-cloudwatch-to-firehose","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","description":"Policy for rap control-plane cloudwatch-to-firehose","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","name":"policy-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"firehose:PutRecordBatch\",\n        \"firehose:PutRecord\"\n      ],\n      \"Resource\": \"arn:aws:firehose:*:*:**\"\n    }\n  ]\n}"},"after":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","description":"Policy for rap control-plane cloudwatch-to-firehose","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","name":"policy-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"firehose:PutRecordBatch\",\n        \"firehose:PutRecord\"\n      ],\n      \"Resource\": \"arn:aws:firehose:*:*:**\"\n    }\n  ]\n}"},"after_unknown":{}}},{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_role.default","module_address":"module.iam-role-cloudwatch-to-firehose","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-cloudwatch-to-firehose","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"logs.eu-west-1.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-cloudwatch-to-firehose","max_session_duration":3600,"name":"role-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-cloudwatch-to-firehose","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H7TYBO2QGQ"},"after":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-cloudwatch-to-firehose","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"logs.eu-west-1.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-cloudwatch-to-firehose","max_session_duration":3600,"name":"role-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-cloudwatch-to-firehose","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H7TYBO2QGQ"},"after_unknown":{}}},{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_role_policy_attachment.edf-enforced","module_address":"module.iam-role-cloudwatch-to-firehose","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839090500000003","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-cloudwatch-to-firehose"},"after":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839090500000003","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-cloudwatch-to-firehose"},"after_unknown":{}}},{"address":"module.iam-role-cloudwatch-to-firehose.aws_iam_role_policy_attachment.inline","module_address":"module.iam-role-cloudwatch-to-firehose","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839253000000004","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","role":"role-rap-control-plane-cloudwatch-to-firehose"},"after":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839253000000004","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","role":"role-rap-control-plane-cloudwatch-to-firehose"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-lambda.aws_iam_policy.default","module_address":"module.iam-role-firehose-to-lambda","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","description":"Policy for rap control-plane firehose-to-lambda","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","name":"policy-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"firehose:*\",\n      \"Resource\": \"arn:aws:firehose:*:*:*\"\n    }\n  ]\n}"},"after":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","description":"Policy for rap control-plane firehose-to-lambda","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","name":"policy-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"firehose:*\",\n      \"Resource\": \"arn:aws:firehose:*:*:*\"\n    }\n  ]\n}"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-lambda.aws_iam_role.default","module_address":"module.iam-role-firehose-to-lambda","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-lambda","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-lambda","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5HSFQCUOGBM"},"after":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-lambda","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-lambda","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5HSFQCUOGBM"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-lambda.aws_iam_role_policy_attachment.edf-enforced","module_address":"module.iam-role-firehose-to-lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839032900000001","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-lambda"},"after":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839032900000001","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-lambda"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-lambda.aws_iam_role_policy_attachment.inline","module_address":"module.iam-role-firehose-to-lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839312300000006","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","role":"role-rap-control-plane-firehose-to-lambda"},"after":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839312300000006","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","role":"role-rap-control-plane-firehose-to-lambda"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-s3.aws_iam_policy.default","module_address":"module.iam-role-firehose-to-s3","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","description":"Policy for rap control-plane firehose-to-s3","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","name":"policy-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucket\",\n        \"s3:GetObject\",\n        \"s3:GetBucketLocation\",\n        \"s3:AbortMultipartUpload\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis/*\",\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"lambda:InvokeFunction\",\n        \"lambda:GetFunctionConfiguration\"\n      ],\n      \"Resource\": \"arn:aws:lambda:*:*:*\"\n    }\n  ]\n}"},"after":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","description":"Policy for rap control-plane firehose-to-s3","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","name":"policy-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucket\",\n        \"s3:GetObject\",\n        \"s3:GetBucketLocation\",\n        \"s3:AbortMultipartUpload\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis/*\",\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"lambda:InvokeFunction\",\n        \"lambda:GetFunctionConfiguration\"\n      ],\n      \"Resource\": \"arn:aws:lambda:*:*:*\"\n    }\n  ]\n}"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-s3.aws_iam_role.default","module_address":"module.iam-role-firehose-to-s3","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"firehose.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-s3","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-s3","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H5ABUJ3MZC"},"after":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"firehose.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-s3","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-s3","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H5ABUJ3MZC"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-s3.aws_iam_role_policy_attachment.edf-enforced","module_address":"module.iam-role-firehose-to-s3","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839042300000002","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-s3"},"after":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839042300000002","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-s3"},"after_unknown":{}}},{"address":"module.iam-role-firehose-to-s3.aws_iam_role_policy_attachment.inline","module_address":"module.iam-role-firehose-to-s3","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839310200000005","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","role":"role-rap-control-plane-firehose-to-s3"},"after":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839310200000005","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","role":"role-rap-control-plane-firehose-to-s3"},"after_unknown":{}}},{"address":"module.s3.aws_kms_key.key[0]","module_address":"module.s3","mode":"managed","type":"aws_kms_key","name":"key","index":0,"provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:kms:eu-west-1:885215942479:key/26806c51-8c1a-4b85-9116-1ccda3f2a42b","deletion_window_in_days":7,"description":"KMS Key for edf-cloudwatch-from-firehose-control-plane-885215942479 S3 bucket","enable_key_rotation":true,"id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","is_enabled":true,"key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::885215942479:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after":{"arn":"arn:aws:kms:eu-west-1:885215942479:key/26806c51-8c1a-4b85-9116-1ccda3f2a42b","deletion_window_in_days":7,"description":"KMS Key for edf-cloudwatch-from-firehose-control-plane-885215942479 S3 bucket","enable_key_rotation":true,"id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","is_enabled":true,"key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::885215942479:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"after_unknown":{}}},{"address":"module.s3.aws_s3_bucket.s3_bucket_dev[0]","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket_dev","index":0,"provider_name":"aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","bucket_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.eu-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"hosted_zone_id":"Z1BKCTXD74EZPE","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","lifecycle_rule":[{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-ia","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":180,"storage_class":"STANDARD_IA"}]},{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-glacier","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":365,"storage_class":"GLACIER"}]}],"logging":[],"object_lock_configuration":[],"policy":null,"region":"eu-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","sse_algorithm":"aws:kms"}]}]}],"tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","bucket_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.eu-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"hosted_zone_id":"Z1BKCTXD74EZPE","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","lifecycle_rule":[{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-ia","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":180,"storage_class":"STANDARD_IA"}]},{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-glacier","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":365,"storage_class":"GLACIER"}]}],"logging":[],"object_lock_configuration":[],"policy":null,"region":"eu-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","sse_algorithm":"aws:kms"}]}]}],"tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{}}},{"address":"module.s3.aws_s3_bucket_public_access_block.public_access_block","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"public_access_block","provider_name":"aws","change":{"actions":["no-op"],"before":{"block_public_acls":true,"block_public_policy":true,"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","ignore_public_acls":true,"restrict_public_buckets":true},"after":{"block_public_acls":true,"block_public_policy":true,"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{}}}],"prior_state":{"format_version":"0.1","terraform_version":"0.12.5","values":{"root_module":{"resources":[{"address":"aws_api_gateway_rest_api.base-api-gw","mode":"managed","type":"aws_api_gateway_rest_api","name":"base-api-gw","provider_name":"aws.primary","schema_version":0,"values":{"api_key_source":"HEADER","binary_media_types":[],"body":null,"created_date":"2019-06-10T11:53:04Z","description":"","endpoint_configuration":[{"types":["EDGE"]}],"execution_arn":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","id":"wkr33higc8","minimum_compression_size":-1,"name":"BaseApiGW","policy":"","root_resource_id":"e5z2xvi6z0"}},{"address":"aws_athena_database.centrallogging","mode":"managed","type":"aws_athena_database","name":"centrallogging","provider_name":"aws","schema_version":0,"values":{"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","encryption_configuration":[],"force_destroy":false,"id":"centrallogging","name":"centrallogging"},"depends_on":["module.s3"]},{"address":"aws_glue_catalog_table.aws_glue_catalog_table","mode":"managed","type":"aws_glue_catalog_table","name":"aws_glue_catalog_table","provider_name":"aws","schema_version":0,"values":{"catalog_id":"885215942479","database_name":"centrallogging","description":"","id":"885215942479:centrallogging:testTable","name":"testtable","owner":"","parameters":{"EXTERNAL":"TRUE"},"partition_keys":[{"comment":"","name":"year","type":"int"},{"comment":"","name":"month","type":"int"},{"comment":"","name":"day","type":"int"},{"comment":"","name":"hour","type":"int"}],"retention":0,"storage_descriptor":[{"bucket_columns":[],"columns":[{"comment":"","name":"level","type":"string"},{"comment":"","name":"loggername","type":"string"},{"comment":"","name":"message","type":"string"},{"comment":"","name":"rid","type":"string"},{"comment":"","name":"env","type":"string"},{"comment":"","name":"sid","type":"string"},{"comment":"","name":"client","type":"string"},{"comment":"","name":"function","type":"string"},{"comment":"","name":"timestamp","type":"string"},{"comment":"","name":"duration","type":"string"},{"comment":"","name":"status","type":"string"},{"comment":"","name":"method","type":"string"},{"comment":"","name":"uri","type":"string"}],"compressed":false,"input_format":"","location":"s3://edf-cloudwatch-from-firehose-control-plane-885215942479/baseFolder","number_of_buckets":0,"output_format":"","parameters":{},"ser_de_info":[{"name":"central-logs","parameters":{"ignore_malformed_json":"true","serialization.format":"1"},"serialization_library":"org.openx.data.jsonserde.JsonSerDe"}],"skewed_info":[],"sort_columns":[],"stored_as_sub_directories":false}],"table_type":"EXTERNAL_TABLE","view_expanded_text":"","view_original_text":""},"depends_on":["aws_athena_database.centrallogging","module.s3"]},{"address":"aws_lambda_function.lambda_processor","mode":"managed","type":"aws_lambda_function","name":"lambda_processor","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor","dead_letter_config":[],"description":"","environment":[],"filename":"exports.zip","function_name":"firehose_lambda_processor","handler":"exports.handler","id":"firehose_lambda_processor","invoke_arn":"arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor/invocations","kms_key_arn":"","last_modified":"2019-07-29T13:28:46.624+0000","layers":[],"memory_size":128,"publish":false,"qualified_arn":"arn:aws:lambda:eu-west-1:885215942479:function:firehose_lambda_processor:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","runtime":"python3.6","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"414nVCRNv5LrH7TsJH0/Ssap5wgXf8jMhpM6FH/gkdI=","source_code_size":2734,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"Lambda Function","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"depends_on":["module.iam-role-firehose-to-lambda","module.lambda-tags"]},{"address":"aws_sns_topic.apiAlarms-primary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-primary","provider_name":"aws.primary","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:185183891841:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"185183891841\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"depends_on":["module.sns-tags"]},{"address":"aws_sns_topic.apiAlarms-secondary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-secondary","provider_name":"aws.secondary","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","delivery_policy":"","display_name":"","http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"apiAlarms","name_prefix":null,"policy":"{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:eu-west-1:697138381919:apiAlarms\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"697138381919\"}}}]}","sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SNS Topic","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"depends_on":["module.sns-tags"]},{"address":"aws_ssm_parameter.base-api-gw-execution-arn","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-execution-arn","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/execution-arn","description":"","id":"/edf/rap/backend/api-gw/execution-arn","key_id":"","name":"/edf/rap/backend/api-gw/execution-arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:execute-api:eu-west-1:185183891841:wkr33higc8","version":1},"depends_on":["aws_api_gateway_rest_api.base-api-gw","module.ssm-tags"]},{"address":"aws_ssm_parameter.base-api-gw-rest-api-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-id","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-id","description":"","id":"/edf/rap/backend/api-gw/rest-api-id","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"wkr33higc8","version":1},"depends_on":["aws_api_gateway_rest_api.base-api-gw","module.ssm-tags"]},{"address":"aws_ssm_parameter.base-api-gw-rest-api-name","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-name","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/rest-api-name","description":"","id":"/edf/rap/backend/api-gw/rest-api-name","key_id":"","name":"/edf/rap/backend/api-gw/rest-api-name","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"BaseApiGW","version":1},"depends_on":["module.ssm-tags"]},{"address":"aws_ssm_parameter.base-api-gw-root-resource-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-root-resource-id","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/api-gw/root-resource-id","description":"","id":"/edf/rap/backend/api-gw/root-resource-id","key_id":"","name":"/edf/rap/backend/api-gw/root-resource-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"e5z2xvi6z0","version":1},"depends_on":["aws_api_gateway_rest_api.base-api-gw","module.ssm-tags"]},{"address":"aws_ssm_parameter.primary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"primary-pinpoint-application-id","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"2a945061a3434784a7641b9bbc7c8cce","version":2},"depends_on":["module.aws-pinpoint-primary","module.ssm-tags"]},{"address":"aws_ssm_parameter.secondary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"secondary-pinpoint-application-id","provider_name":"aws.secondary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/pinpoint-application-id","description":"","id":"/edf/rap/backend/pinpoint-application-id","key_id":"","name":"/edf/rap/backend/pinpoint-application-id","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"5ca7d749a2ad42028adbca8d672332ce","version":2},"depends_on":["module.aws-pinpoint-secondary","module.ssm-tags"]},{"address":"aws_ssm_parameter.sns-topic-arn-primary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-primary","provider_name":"aws.primary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:185183891841:apiAlarms","version":1},"depends_on":["aws_sns_topic.apiAlarms-primary","module.ssm-tags"]},{"address":"aws_ssm_parameter.sns-topic-arn-secondary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-secondary","provider_name":"aws.secondary","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/backend/sns/api-alarms/arn","description":"","id":"/edf/rap/backend/sns/api-alarms/arn","key_id":"","name":"/edf/rap/backend/sns/api-alarms/arn","overwrite":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"SSM Variable","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"tier":"Standard","type":"String","value":"arn:aws:sns:eu-west-1:697138381919:apiAlarms","version":1},"depends_on":["aws_sns_topic.apiAlarms-secondary","module.ssm-tags"]},{"address":"data.aws_iam_policy_document.cloudwatch_firehose_policy","mode":"data","type":"aws_iam_policy_document","name":"cloudwatch_firehose_policy","provider_name":"aws","schema_version":0,"values":{"id":"2509448610","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"firehose:PutRecordBatch\",\n        \"firehose:PutRecord\"\n      ],\n      \"Resource\": \"arn:aws:firehose:*:*:**\"\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["firehose:PutRecord","firehose:PutRecordBatch"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:firehose:*:*:**"],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.cloudwatch_firehose_trust","mode":"data","type":"aws_iam_policy_document","name":"cloudwatch_firehose_trust","provider_name":"aws","schema_version":0,"values":{"id":"2105747493","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"logs.eu-west-1.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["logs.eu-west-1.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.firehose_lambda_policy","mode":"data","type":"aws_iam_policy_document","name":"firehose_lambda_policy","provider_name":"aws","schema_version":0,"values":{"id":"71303860","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"firehose:*\",\n      \"Resource\": \"arn:aws:firehose:*:*:*\"\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:logs:*:*:*"],"sid":""},{"actions":["firehose:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:firehose:*:*:*"],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.firehose_lambda_trust","mode":"data","type":"aws_iam_policy_document","name":"firehose_lambda_trust","provider_name":"aws","schema_version":0,"values":{"id":"3693445097","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["lambda.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.firehose_s3_policy","mode":"data","type":"aws_iam_policy_document","name":"firehose_s3_policy","provider_name":"aws","schema_version":0,"values":{"id":"3846801038","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucket\",\n        \"s3:GetObject\",\n        \"s3:GetBucketLocation\",\n        \"s3:AbortMultipartUpload\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis/*\",\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"lambda:InvokeFunction\",\n        \"lambda:GetFunctionConfiguration\"\n      ],\n      \"Resource\": \"arn:aws:lambda:*:*:*\"\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["s3:AbortMultipartUpload","s3:GetBucketLocation","s3:GetObject","s3:ListBucket","s3:ListBucketMultipartUploads","s3:PutObject"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:s3:::edf-cloudwatch-from-kinesis","arn:aws:s3:::edf-cloudwatch-from-kinesis/*"],"sid":""},{"actions":["lambda:GetFunctionConfiguration","lambda:InvokeFunction"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:lambda:*:*:*"],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.firehose_s3_trust","mode":"data","type":"aws_iam_policy_document","name":"firehose_s3_trust","provider_name":"aws","schema_version":0,"values":{"id":"2320068715","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"firehose.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["firehose.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}}],"child_modules":[{"resources":[{"address":"aws_cloudwatch_log_group.firehose_s3_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"firehose_s3_log_group","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:*","id":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","kms_key_id":"","name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name_prefix":null,"retention_in_days":30,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"depends_on":["module.firehose_tags"]},{"address":"aws_cloudwatch_log_stream.firehose_s3_log_stream","mode":"managed","type":"aws_cloudwatch_log_stream","name":"firehose_s3_log_stream","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-1:885215942479:log-group:edf-rap-firehose-cloudwatch-control-plane-firehose-logs:log-stream:DeliveryStream","id":"DeliveryStream","log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","name":"DeliveryStream"},"depends_on":["aws_cloudwatch_log_group.firehose_s3_log_group"]},{"address":"aws_kinesis_firehose_delivery_stream.this","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"this","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","destination":"extended_s3","destination_id":"destinationId-000000000001","elasticsearch_configuration":[],"extended_s3_configuration":[{"bucket_arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","buffer_interval":60,"buffer_size":5,"cloudwatch_logging_options":[{"enabled":true,"log_group_name":"edf-rap-firehose-cloudwatch-control-plane-firehose-logs","log_stream_name":"DeliveryStream"}],"compression_format":"UNCOMPRESSED","data_format_conversion_configuration":[],"error_output_prefix":"myErrorPrefix/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/!{firehose:error-output-type}","kms_key_arn":"","prefix":"baseFolder/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/","processing_configuration":[],"role_arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","s3_backup_configuration":[],"s3_backup_mode":"Disabled"}],"id":"arn:aws:firehose:eu-west-1:885215942479:deliverystream/edf-rap-firehose-cloudwatch-control-plane-delivery-stream","kinesis_source_configuration":[],"name":"edf-rap-firehose-cloudwatch-control-plane-delivery-stream","redshift_configuration":[],"s3_configuration":[],"splunk_configuration":[],"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-rap-firehose-cloudwatch-control-plane","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"version_id":"1"},"depends_on":["aws_cloudwatch_log_group.firehose_s3_log_group","aws_cloudwatch_log_stream.firehose_s3_log_stream","module.firehose_tags"]}],"address":"module.firehose-for-cloudwatch"},{"resources":[{"address":"aws_pinpoint_app.this","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"5ca7d749a2ad42028adbca8d672332ce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"loki.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]}},{"address":"aws_pinpoint_email_channel.email","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_name":"aws.secondary","schema_version":0,"values":{"application_id":"5ca7d749a2ad42028adbca8d672332ce","enabled":true,"from_address":"glow@loki.rap.lucidus.io","id":"5ca7d749a2ad42028adbca8d672332ce","identity":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint"},"depends_on":["aws_pinpoint_app.this","module.iam-role"]},{"address":"data.aws_iam_policy_document.this","mode":"data","type":"aws_iam_policy_document","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"id":"1095888775","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:697138381919:*\"\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["mobiletargeting:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:mobiletargeting:eu-west-1:697138381919:*"],"sid":""}],"version":"2012-10-17"},"depends_on":["module.common"]}],"address":"module.aws-pinpoint-secondary","child_modules":[{"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","description":"Policy for rap secondary pinpoint","id":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","name":"policy-rap-secondary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:697138381919:*\"\n    }\n  ]\n}"}},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:iam::697138381919:role/role-rap-secondary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-secondary-pinpoint","max_session_duration":3600,"name":"role-rap-secondary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-secondary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA2EUFPQRPUIQZYMZWB"},"depends_on":["data.aws_iam_policy_document.assume_role_policy","module.tags"]},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws.secondary","schema_version":0,"values":{"id":"role-rap-secondary-pinpoint-20190710102859011400000001","policy_arn":"arn:aws:iam::697138381919:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-secondary-pinpoint"},"depends_on":["aws_iam_role.default","module.common"]},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws.secondary","schema_version":0,"values":{"id":"role-rap-secondary-pinpoint-20190710102859730400000002","policy_arn":"arn:aws:iam::697138381919:policy/policy-rap-secondary-pinpoint","role":"role-rap-secondary-pinpoint"},"depends_on":["aws_iam_policy.default","aws_iam_role.default"]},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_name":"aws.secondary","schema_version":0,"values":{"id":"1367717690","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"AWS\": [],\n        \"Service\": \"pinpoint.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["pinpoint.amazonaws.com"],"type":"Service"},{"identifiers":[],"type":"AWS"}],"resources":[],"sid":""}],"version":"2012-10-17"}}],"address":"module.aws-pinpoint-secondary.module.iam-role","child_modules":[{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws.secondary","schema_version":0,"values":{"account_id":"697138381919","arn":"arn:aws:sts::697138381919:assumed-role/role-bootstrap/1564580695357520000","id":"2019-07-31 13:44:56.980641 +0000 UTC","user_id":"AROA2EUFPQRPX5X3Q6HI2:1564580695357520000"}}],"address":"module.aws-pinpoint-secondary.module.iam-role.module.common"}]},{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws.secondary","schema_version":0,"values":{"account_id":"697138381919","arn":"arn:aws:sts::697138381919:assumed-role/role-bootstrap/1564580695357520000","id":"2019-07-31 13:44:56.967683 +0000 UTC","user_id":"AROA2EUFPQRPX5X3Q6HI2:1564580695357520000"}}],"address":"module.aws-pinpoint-secondary.module.common"}]},{"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","description":"Policy for rap control-plane firehose-to-s3","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","name":"policy-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:ListBucketMultipartUploads\",\n        \"s3:ListBucket\",\n        \"s3:GetObject\",\n        \"s3:GetBucketLocation\",\n        \"s3:AbortMultipartUpload\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis/*\",\n        \"arn:aws:s3:::edf-cloudwatch-from-kinesis\"\n      ]\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"lambda:InvokeFunction\",\n        \"lambda:GetFunctionConfiguration\"\n      ],\n      \"Resource\": \"arn:aws:lambda:*:*:*\"\n    }\n  ]\n}"}},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-s3","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"firehose.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-s3","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-s3","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-s3","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H5ABUJ3MZC"},"depends_on":["data.aws_iam_policy_document.assume_role_policy","module.tags"]},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839042300000002","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-s3"},"depends_on":["aws_iam_role.default","module.common"]},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-s3-20190729132839310200000005","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-s3","role":"role-rap-control-plane-firehose-to-s3"},"depends_on":["aws_iam_policy.default","aws_iam_role.default"]},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_name":"aws","schema_version":0,"values":{"id":"2783130461","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"AWS\": [],\n        \"Service\": []\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[],"type":"AWS"},{"identifiers":[],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}}],"address":"module.iam-role-firehose-to-s3","child_modules":[{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"885215942479","arn":"arn:aws:sts::885215942479:assumed-role/role-bootstrap/awsume-session-edf-control-plane","id":"2019-07-31 13:44:56.894656 +0000 UTC","user_id":"AROA44GX3K5HVGFJ7PTQS:awsume-session-edf-control-plane"}}],"address":"module.iam-role-firehose-to-s3.module.common"}]},{"resources":[{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":2,"provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"f2vn243xwopltatdg6qlpneqzgfyql7h._domainkey.thor.rap.lucidus.io","records":["f2vn243xwopltatdg6qlpneqzgfyql7h.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"depends_on":["aws_ses_domain_dkim.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":0,"provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"pm6m6swd2vgw4viwsstdorudgkibrxux._domainkey.thor.rap.lucidus.io","records":["pm6m6swd2vgw4viwsstdorudgkibrxux.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"depends_on":["aws_ses_domain_dkim.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":1,"provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"xsens4ilpqgd3zlujas7od57bxivxpjq._domainkey.thor.rap.lucidus.io","records":["xsens4ilpqgd3zlujas7od57bxivxpjq.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"depends_on":["aws_ses_domain_dkim.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_route53_record.mail_from_mx","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"depends_on":["aws_ses_domain_mail_from.this","data.aws_ssm_parameter.zone_id"]},{"address":"aws_route53_record.mail_from_txt","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT_bounce.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.thor.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"depends_on":["aws_ses_domain_mail_from.this","data.aws_ssm_parameter.zone_id"]},{"address":"aws_route53_record.verification_record","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_name":"aws.primary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.thor.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z2RAJAPB2DPDXT__amazonses.thor.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.thor.rap.lucidus.io","records":["thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z2RAJAPB2DPDXT"},"depends_on":["aws_ses_domain_identity.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_ses_domain_dkim.this","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"dkim_tokens":["pm6m6swd2vgw4viwsstdorudgkibrxux","xsens4ilpqgd3zlujas7od57bxivxpjq","f2vn243xwopltatdg6qlpneqzgfyql7h"],"domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io"},"depends_on":["data.aws_ssm_parameter.zone_name"]},{"address":"aws_ses_domain_identity.this","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","verification_token":"thbXNXnftEvj6912JmZfiM/ti6y5wQueCUuJ8IMXBvM="},"depends_on":["data.aws_ssm_parameter.zone_name"]},{"address":"aws_ses_domain_identity_verification.this","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","timeouts":null},"depends_on":["aws_route53_record.verification_record","aws_ses_domain_identity.this"]},{"address":"aws_ses_domain_mail_from.this","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"behavior_on_mx_failure":"UseDefaultValue","domain":"thor.rap.lucidus.io","id":"thor.rap.lucidus.io","mail_from_domain":"bounce.thor.rap.lucidus.io"},"depends_on":["aws_ses_domain_identity.this"]},{"address":"data.aws_ssm_parameter.zone_id","mode":"data","type":"aws_ssm_parameter","name":"zone_id","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/hosted_zone_id","id":"/edf/rap/hosted_zone_id","name":"/edf/rap/hosted_zone_id","type":"String","value":"Z2RAJAPB2DPDXT","version":7,"with_decryption":true}},{"address":"data.aws_ssm_parameter.zone_name","mode":"data","type":"aws_ssm_parameter","name":"zone_name","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:ssm:eu-west-1:185183891841:parameter/edf/rap/hosted_zone_name","id":"/edf/rap/hosted_zone_name","name":"/edf/rap/hosted_zone_name","type":"String","value":"thor.rap.lucidus.io","version":7,"with_decryption":true}}],"address":"module.aws-ses-primary"},{"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","description":"Policy for rap control-plane cloudwatch-to-firehose","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","name":"policy-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"firehose:PutRecordBatch\",\n        \"firehose:PutRecord\"\n      ],\n      \"Resource\": \"arn:aws:firehose:*:*:**\"\n    }\n  ]\n}"}},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-cloudwatch-to-firehose","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"logs.eu-west-1.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-cloudwatch-to-firehose","max_session_duration":3600,"name":"role-rap-control-plane-cloudwatch-to-firehose","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-cloudwatch-to-firehose","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5H7TYBO2QGQ"},"depends_on":["data.aws_iam_policy_document.assume_role_policy","module.tags"]},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839090500000003","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-cloudwatch-to-firehose"},"depends_on":["aws_iam_role.default","module.common"]},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-cloudwatch-to-firehose-20190729132839253000000004","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-cloudwatch-to-firehose","role":"role-rap-control-plane-cloudwatch-to-firehose"},"depends_on":["aws_iam_policy.default","aws_iam_role.default"]},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_name":"aws","schema_version":0,"values":{"id":"2783130461","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"AWS\": [],\n        \"Service\": []\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[],"type":"AWS"},{"identifiers":[],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}}],"address":"module.iam-role-cloudwatch-to-firehose","child_modules":[{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"885215942479","arn":"arn:aws:sts::885215942479:assumed-role/role-bootstrap/awsume-session-edf-control-plane","id":"2019-07-31 13:44:56.893486 +0000 UTC","user_id":"AROA44GX3K5HVGFJ7PTQS:awsume-session-edf-control-plane"}}],"address":"module.iam-role-cloudwatch-to-firehose.module.common"}]},{"resources":[{"address":"aws_kms_key.key","mode":"managed","type":"aws_kms_key","name":"key","index":0,"provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:kms:eu-west-1:885215942479:key/26806c51-8c1a-4b85-9116-1ccda3f2a42b","deletion_window_in_days":7,"description":"KMS Key for edf-cloudwatch-from-firehose-control-plane-885215942479 S3 bucket","enable_key_rotation":true,"id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","is_enabled":true,"key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","key_usage":"ENCRYPT_DECRYPT","policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::885215942479:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"}},"depends_on":["module.tags"]},{"address":"aws_s3_bucket.s3_bucket_dev","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket_dev","index":0,"provider_name":"aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::edf-cloudwatch-from-firehose-control-plane-885215942479","bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","bucket_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"edf-cloudwatch-from-firehose-control-plane-885215942479.s3.eu-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"hosted_zone_id":"Z1BKCTXD74EZPE","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","lifecycle_rule":[{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-ia","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":180,"storage_class":"STANDARD_IA"}]},{"abort_incomplete_multipart_upload_days":0,"enabled":false,"expiration":[],"id":"transition-to-glacier","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","tags":{},"transition":[{"date":"","days":365,"storage_class":"GLACIER"}]}],"logging":[],"object_lock_configuration":[],"policy":null,"region":"eu-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"26806c51-8c1a-4b85-9116-1ccda3f2a42b","sse_algorithm":"aws:kms"}]}]}],"tags":{"Business Unit":"Customers","Compliance":"GDPR","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"edf-cloudwatch-from-firehose","Project":"rap","Project Environment":"control-plane","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"depends_on":["aws_kms_key.key[0]","module.tags"]},{"address":"aws_s3_bucket_public_access_block.public_access_block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"public_access_block","provider_name":"aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"edf-cloudwatch-from-firehose-control-plane-885215942479","id":"edf-cloudwatch-from-firehose-control-plane-885215942479","ignore_public_acls":true,"restrict_public_buckets":true},"depends_on":["aws_s3_bucket.s3_bucket_dev[0]","aws_s3_bucket.s3_bucket_prod[0]"]}],"address":"module.s3","child_modules":[{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"885215942479","arn":"arn:aws:sts::885215942479:assumed-role/role-bootstrap/awsume-session-edf-control-plane","id":"2019-07-31 13:44:56.885272 +0000 UTC","user_id":"AROA44GX3K5HVGFJ7PTQS:awsume-session-edf-control-plane"}}],"address":"module.s3.module.common"}]},{"resources":[{"address":"aws_pinpoint_app.this","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","campaign_hook":[{"lambda_function_name":"","mode":"","web_url":""}],"id":"2a945061a3434784a7641b9bbc7c8cce","limits":[{"daily":0,"maximum_duration":0,"messages_per_second":0,"total":0}],"name":"thor.rap.lucidus.io","name_prefix":null,"quiet_time":[{"end":"","start":""}]}},{"address":"aws_pinpoint_email_channel.email","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_name":"aws.primary","schema_version":0,"values":{"application_id":"2a945061a3434784a7641b9bbc7c8cce","enabled":true,"from_address":"glow@thor.rap.lucidus.io","id":"2a945061a3434784a7641b9bbc7c8cce","identity":"arn:aws:ses:eu-west-1:185183891841:identity/thor.rap.lucidus.io","messages_per_second":14,"role_arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint"},"depends_on":["aws_pinpoint_app.this","module.iam-role"]},{"address":"data.aws_iam_policy_document.this","mode":"data","type":"aws_iam_policy_document","name":"this","provider_name":"aws.primary","schema_version":0,"values":{"id":"1107078497","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:185183891841:*\"\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["mobiletargeting:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:mobiletargeting:eu-west-1:185183891841:*"],"sid":""}],"version":"2012-10-17"},"depends_on":["module.common"]}],"address":"module.aws-pinpoint-primary","child_modules":[{"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","description":"Policy for rap primary pinpoint","id":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","name":"policy-rap-primary-pinpoint","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"mobiletargeting:*\",\n      \"Resource\": \"arn:aws:mobiletargeting:eu-west-1:185183891841:*\"\n    }\n  ]\n}"}},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws.primary","schema_version":0,"values":{"arn":"arn:aws:iam::185183891841:role/role-rap-primary-pinpoint","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-10T10:28:57Z","description":"","force_detach_policies":true,"id":"role-rap-primary-pinpoint","max_session_duration":3600,"name":"role-rap-primary-pinpoint","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-primary-pinpoint","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROASWHOR6GAQB2XWBVEJ"},"depends_on":["data.aws_iam_policy_document.assume_role_policy","module.tags"]},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws.primary","schema_version":0,"values":{"id":"role-rap-primary-pinpoint-20190710102858917800000001","policy_arn":"arn:aws:iam::185183891841:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-primary-pinpoint"},"depends_on":["aws_iam_role.default","module.common"]},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws.primary","schema_version":0,"values":{"id":"role-rap-primary-pinpoint-20190710102859512400000002","policy_arn":"arn:aws:iam::185183891841:policy/policy-rap-primary-pinpoint","role":"role-rap-primary-pinpoint"},"depends_on":["aws_iam_policy.default","aws_iam_role.default"]},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_name":"aws.primary","schema_version":0,"values":{"id":"1367717690","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"AWS\": [],\n        \"Service\": \"pinpoint.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["pinpoint.amazonaws.com"],"type":"Service"},{"identifiers":[],"type":"AWS"}],"resources":[],"sid":""}],"version":"2012-10-17"}}],"address":"module.aws-pinpoint-primary.module.iam-role","child_modules":[{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws.primary","schema_version":0,"values":{"account_id":"185183891841","arn":"arn:aws:sts::185183891841:assumed-role/role-bootstrap/1564580695267886000","id":"2019-07-31 13:44:56.757542 +0000 UTC","user_id":"AROASWHOR6GATK24H5M63:1564580695267886000"}}],"address":"module.aws-pinpoint-primary.module.iam-role.module.common"}]},{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws.primary","schema_version":0,"values":{"account_id":"185183891841","arn":"arn:aws:sts::185183891841:assumed-role/role-bootstrap/1564580695267886000","id":"2019-07-31 13:44:56.761597 +0000 UTC","user_id":"AROASWHOR6GATK24H5M63:1564580695267886000"}}],"address":"module.aws-pinpoint-primary.module.common"}]},{"resources":[{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":0,"provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"2szrhjzfl6kaglcbe4y7uuxi2d72pzta._domainkey.loki.rap.lucidus.io","records":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"depends_on":["aws_ses_domain_dkim.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":1,"provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"4bqlchp3iwqjoi3hf35pzszutsmvdwyi._domainkey.loki.rap.lucidus.io","records":["4bqlchp3iwqjoi3hf35pzszutsmvdwyi.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"depends_on":["aws_ses_domain_dkim.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","index":2,"provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"fkwsdhserncprsbgtneoylxper5xdesa._domainkey.loki.rap.lucidus.io","records":["fkwsdhserncprsbgtneoylxper5xdesa.dkim.amazonses.com"],"set_identifier":"","ttl":600,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"depends_on":["aws_ses_domain_dkim.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_route53_record.mail_from_mx","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_MX","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["10 feedback-smtp.eu-west-1.amazonses.com"],"set_identifier":"","ttl":600,"type":"MX","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"depends_on":["aws_ses_domain_mail_from.this","data.aws_ssm_parameter.zone_id"]},{"address":"aws_route53_record.mail_from_txt","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"bounce.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2_bounce.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"bounce.loki.rap.lucidus.io","records":["v=spf1 include:amazonses.com -all"],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"depends_on":["aws_ses_domain_mail_from.this","data.aws_ssm_parameter.zone_id"]},{"address":"aws_route53_record.verification_record","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_name":"aws.secondary","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"_amazonses.loki.rap.lucidus.io","geolocation_routing_policy":[],"health_check_id":"","id":"Z1MGYRAK5FLCP2__amazonses.loki.rap.lucidus.io_TXT","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"_amazonses.loki.rap.lucidus.io","records":["a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="],"set_identifier":"","ttl":600,"type":"TXT","weighted_routing_policy":[],"zone_id":"Z1MGYRAK5FLCP2"},"depends_on":["aws_ses_domain_identity.this","data.aws_ssm_parameter.zone_id","data.aws_ssm_parameter.zone_name"]},{"address":"aws_ses_domain_dkim.this","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"dkim_tokens":["2szrhjzfl6kaglcbe4y7uuxi2d72pzta","4bqlchp3iwqjoi3hf35pzszutsmvdwyi","fkwsdhserncprsbgtneoylxper5xdesa"],"domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io"},"depends_on":["data.aws_ssm_parameter.zone_name"]},{"address":"aws_ses_domain_identity.this","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","verification_token":"a5J/tAyu4FW5Nd2SIXbyM++jkDo1tEDUJttWQS888r4="},"depends_on":["data.aws_ssm_parameter.zone_name"]},{"address":"aws_ses_domain_identity_verification.this","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:ses:eu-west-1:697138381919:identity/loki.rap.lucidus.io","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","timeouts":null},"depends_on":["aws_route53_record.verification_record","aws_ses_domain_identity.this"]},{"address":"aws_ses_domain_mail_from.this","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_name":"aws.secondary","schema_version":0,"values":{"behavior_on_mx_failure":"UseDefaultValue","domain":"loki.rap.lucidus.io","id":"loki.rap.lucidus.io","mail_from_domain":"bounce.loki.rap.lucidus.io"},"depends_on":["aws_ses_domain_identity.this"]},{"address":"data.aws_ssm_parameter.zone_id","mode":"data","type":"aws_ssm_parameter","name":"zone_id","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/hosted_zone_id","id":"/edf/rap/hosted_zone_id","name":"/edf/rap/hosted_zone_id","type":"String","value":"Z1MGYRAK5FLCP2","version":7,"with_decryption":true}},{"address":"data.aws_ssm_parameter.zone_name","mode":"data","type":"aws_ssm_parameter","name":"zone_name","provider_name":"aws.secondary","schema_version":0,"values":{"arn":"arn:aws:ssm:eu-west-1:697138381919:parameter/edf/rap/hosted_zone_name","id":"/edf/rap/hosted_zone_name","name":"/edf/rap/hosted_zone_name","type":"String","value":"loki.rap.lucidus.io","version":7,"with_decryption":true}}],"address":"module.aws-ses-secondary"},{"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","description":"Policy for rap control-plane firehose-to-lambda","id":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","name":"policy-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"firehose:*\",\n      \"Resource\": \"arn:aws:firehose:*:*:*\"\n    }\n  ]\n}"}},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::885215942479:role/role-rap-control-plane-firehose-to-lambda","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-07-29T13:28:38Z","description":"","force_detach_policies":true,"id":"role-rap-control-plane-firehose-to-lambda","max_session_duration":3600,"name":"role-rap-control-plane-firehose-to-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Business Unit":"Customers","Cost Centre":"KCOU","Creator":"Terraform via CD Pipeline","Environment":"Production","Major Function":"Business_Change_and_IT","Name":"role-rap-control-plane-firehose-to-lambda","Project":"rap","Project Environment":"dev","Service":"RAP","Service Level":"Platinum","Work Order":"KCOU"},"unique_id":"AROA44GX3K5HSFQCUOGBM"},"depends_on":["data.aws_iam_policy_document.assume_role_policy","module.tags"]},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839032900000001","policy_arn":"arn:aws:iam::885215942479:policy/AWS_DUB_POL_ProtectSecurityConfiguration_protected","role":"role-rap-control-plane-firehose-to-lambda"},"depends_on":["aws_iam_role.default","module.common"]},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_name":"aws","schema_version":0,"values":{"id":"role-rap-control-plane-firehose-to-lambda-20190729132839312300000006","policy_arn":"arn:aws:iam::885215942479:policy/policy-rap-control-plane-firehose-to-lambda","role":"role-rap-control-plane-firehose-to-lambda"},"depends_on":["aws_iam_policy.default","aws_iam_role.default"]},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_name":"aws","schema_version":0,"values":{"id":"2783130461","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"AWS\": [],\n        \"Service\": []\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[],"type":"AWS"},{"identifiers":[],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}}],"address":"module.iam-role-firehose-to-lambda","child_modules":[{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"885215942479","arn":"arn:aws:sts::885215942479:assumed-role/role-bootstrap/awsume-session-edf-control-plane","id":"2019-07-31 13:44:56.888333 +0000 UTC","user_id":"AROA44GX3K5HVGFJ7PTQS:awsume-session-edf-control-plane"}}],"address":"module.iam-role-firehose-to-lambda.module.common"}]}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","version_constraint":"~\u003e 2.21.1","expressions":{"region":{"references":["local.region"]}}},"aws.primary":{"name":"aws","alias":"primary","version_constraint":"~\u003e 2.21.1","expressions":{"allowed_account_ids":{"references":["local.primary_account_id"]},"assume_role":[{"role_arn":{"references":["local.primary_assume_role_arn"]}}],"region":{"references":["local.region"]}}},"aws.secondary":{"name":"aws","alias":"secondary","version_constraint":"~\u003e 2.21.1","expressions":{"allowed_account_ids":{"references":["local.secondary_account_id"]},"assume_role":[{"role_arn":{"references":["local.secondary_assume_role_arn"]}}],"region":{"references":["local.region"]}}}},"root_module":{"resources":[{"address":"aws_api_gateway_authorizer.cognito","mode":"managed","type":"aws_api_gateway_authorizer","name":"cognito","provider_config_key":"aws","expressions":{"name":{"constant_value":"cognito"},"rest_api_id":{"references":["aws_api_gateway_rest_api.base-api-gw"]},"type":{"constant_value":"COGNITO_USER_POOLS"}},"schema_version":0},{"address":"aws_api_gateway_rest_api.base-api-gw","mode":"managed","type":"aws_api_gateway_rest_api","name":"base-api-gw","provider_config_key":"aws.primary","expressions":{"name":{"references":["local.api_gw_name"]}},"schema_version":0},{"address":"aws_athena_database.centrallogging","mode":"managed","type":"aws_athena_database","name":"centrallogging","provider_config_key":"aws","expressions":{"bucket":{"references":["module.s3.id"]},"name":{"constant_value":"centrallogging"}},"schema_version":0},{"address":"aws_glue_catalog_table.aws_glue_catalog_table","mode":"managed","type":"aws_glue_catalog_table","name":"aws_glue_catalog_table","provider_config_key":"aws","expressions":{"database_name":{"references":["aws_athena_database.centrallogging"]},"name":{"constant_value":"testtable"},"parameters":{"constant_value":{"EXTERNAL":"TRUE"}},"partition_keys":[{"name":{"constant_value":"year"},"type":{"constant_value":"int"}},{"name":{"constant_value":"month"},"type":{"constant_value":"int"}},{"name":{"constant_value":"day"},"type":{"constant_value":"int"}},{"name":{"constant_value":"hour"},"type":{"constant_value":"int"}}],"storage_descriptor":[{"columns":[{"name":{"constant_value":"level"},"type":{"constant_value":"string"}},{"name":{"constant_value":"loggername"},"type":{"constant_value":"string"}},{"name":{"constant_value":"message"},"type":{"constant_value":"string"}},{"name":{"constant_value":"rid"},"type":{"constant_value":"string"}},{"name":{"constant_value":"env"},"type":{"constant_value":"string"}},{"name":{"constant_value":"sid"},"type":{"constant_value":"string"}},{"name":{"constant_value":"client"},"type":{"constant_value":"string"}},{"name":{"constant_value":"function"},"type":{"constant_value":"string"}},{"name":{"constant_value":"timestamp"},"type":{"constant_value":"string"}},{"name":{"constant_value":"duration"},"type":{"constant_value":"string"}},{"name":{"constant_value":"status"},"type":{"constant_value":"string"}},{"name":{"constant_value":"method"},"type":{"constant_value":"string"}},{"name":{"constant_value":"uri"},"type":{"constant_value":"string"}}],"location":{"references":["module.s3.id"]},"ser_de_info":[{"name":{"constant_value":"central-logs"},"parameters":{"constant_value":{"ignore_malformed_json":"true","serialization.format":1}},"serialization_library":{"constant_value":"org.openx.data.jsonserde.JsonSerDe"}}]}],"table_type":{"constant_value":"EXTERNAL_TABLE"}},"schema_version":0},{"address":"aws_lambda_function.lambda_processor","mode":"managed","type":"aws_lambda_function","name":"lambda_processor","provider_config_key":"aws","expressions":{"filename":{"constant_value":"exports.zip"},"function_name":{"constant_value":"firehose_lambda_processor"},"handler":{"constant_value":"exports.handler"},"role":{"references":["module.iam-role-firehose-to-lambda.arn"]},"runtime":{"constant_value":"python3.6"},"tags":{"references":["module.lambda-tags.tags"]}},"schema_version":0},{"address":"aws_sns_topic.apiAlarms-primary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-primary","provider_config_key":"aws.primary","expressions":{"name":{"constant_value":"apiAlarms"},"tags":{"references":["module.sns-tags.tags"]}},"schema_version":0},{"address":"aws_sns_topic.apiAlarms-secondary","mode":"managed","type":"aws_sns_topic","name":"apiAlarms-secondary","provider_config_key":"aws.secondary","expressions":{"name":{"constant_value":"apiAlarms"},"tags":{"references":["module.sns-tags.tags"]}},"schema_version":0},{"address":"aws_ssm_parameter.authorizor_id","mode":"managed","type":"aws_ssm_parameter","name":"authorizor_id","provider_config_key":"aws.primary","expressions":{"name":{"constant_value":"/edf/rap/backend/api-gw/authorizor-id"},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["aws_api_gateway_authorizer.cognito"]}},"schema_version":0},{"address":"aws_ssm_parameter.base-api-gw-execution-arn","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-execution-arn","provider_config_key":"aws.primary","expressions":{"name":{"constant_value":"/edf/rap/backend/api-gw/execution-arn"},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["aws_api_gateway_rest_api.base-api-gw"]}},"schema_version":0},{"address":"aws_ssm_parameter.base-api-gw-rest-api-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-id","provider_config_key":"aws.primary","expressions":{"name":{"constant_value":"/edf/rap/backend/api-gw/rest-api-id"},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["aws_api_gateway_rest_api.base-api-gw"]}},"schema_version":0},{"address":"aws_ssm_parameter.base-api-gw-rest-api-name","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-rest-api-name","provider_config_key":"aws.primary","expressions":{"name":{"constant_value":"/edf/rap/backend/api-gw/rest-api-name"},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["local.api_gw_name"]}},"schema_version":0},{"address":"aws_ssm_parameter.base-api-gw-root-resource-id","mode":"managed","type":"aws_ssm_parameter","name":"base-api-gw-root-resource-id","provider_config_key":"aws.primary","expressions":{"name":{"constant_value":"/edf/rap/backend/api-gw/root-resource-id"},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["aws_api_gateway_rest_api.base-api-gw"]}},"schema_version":0},{"address":"aws_ssm_parameter.primary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"primary-pinpoint-application-id","provider_config_key":"aws.primary","expressions":{"name":{"references":["local.company","local.project"]},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["module.aws-pinpoint-primary.pinpoint"]}},"schema_version":0},{"address":"aws_ssm_parameter.secondary-pinpoint-application-id","mode":"managed","type":"aws_ssm_parameter","name":"secondary-pinpoint-application-id","provider_config_key":"aws.secondary","expressions":{"name":{"references":["local.company","local.project"]},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["module.aws-pinpoint-secondary.pinpoint"]}},"schema_version":0},{"address":"aws_ssm_parameter.sns-topic-arn-primary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-primary","provider_config_key":"aws.primary","expressions":{"name":{"references":["local.company","local.project"]},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["aws_sns_topic.apiAlarms-primary"]}},"schema_version":0},{"address":"aws_ssm_parameter.sns-topic-arn-secondary","mode":"managed","type":"aws_ssm_parameter","name":"sns-topic-arn-secondary","provider_config_key":"aws.secondary","expressions":{"name":{"references":["local.company","local.project"]},"tags":{"references":["module.ssm-tags.tags"]},"type":{"constant_value":"String"},"value":{"references":["aws_sns_topic.apiAlarms-secondary"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.cloudwatch_firehose_policy","mode":"data","type":"aws_iam_policy_document","name":"cloudwatch_firehose_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["firehose:PutRecord","firehose:PutRecordBatch"]},"resources":{"constant_value":["arn:aws:firehose:*:*:**"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.cloudwatch_firehose_trust","mode":"data","type":"aws_iam_policy_document","name":"cloudwatch_firehose_trust","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["logs.eu-west-1.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.firehose_lambda_policy","mode":"data","type":"aws_iam_policy_document","name":"firehose_lambda_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents","logs:CreateLogGroup"]},"resources":{"constant_value":["arn:aws:logs:*:*:*"]}},{"actions":{"constant_value":["firehose:*"]},"resources":{"constant_value":["arn:aws:firehose:*:*:*"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.firehose_lambda_trust","mode":"data","type":"aws_iam_policy_document","name":"firehose_lambda_trust","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["lambda.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.firehose_s3_policy","mode":"data","type":"aws_iam_policy_document","name":"firehose_s3_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:AbortMultipartUpload","s3:GetBucketLocation","s3:GetObject","s3:ListBucket","s3:ListBucketMultipartUploads","s3:PutObject"]},"resources":{"constant_value":["arn:aws:s3:::edf-cloudwatch-from-kinesis","arn:aws:s3:::edf-cloudwatch-from-kinesis/*"]}},{"actions":{"constant_value":["lambda:InvokeFunction","lambda:GetFunctionConfiguration"]},"resources":{"constant_value":["arn:aws:lambda:*:*:*"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.firehose_s3_trust","mode":"data","type":"aws_iam_policy_document","name":"firehose_s3_trust","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["firehose.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0}],"module_calls":{"aws-pinpoint-primary":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-pinpoint","expressions":{"aws_ses_domain_identity_arn":{"references":["module.aws-ses-primary.domain_identity_arn"]},"environment":{"constant_value":"primary"},"from_address":{"references":["module.aws-ses-primary.zone_name"]},"name":{"references":["module.aws-ses-primary.zone_name"]}},"module":{"outputs":{"pinpoint":{"expression":{"references":["aws_pinpoint_app.this"]}}},"resources":[{"address":"aws_pinpoint_app.this","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_config_key":"aws-pinpoint-primary:aws","expressions":{"name":{"references":["var.name"]}},"schema_version":0},{"address":"aws_pinpoint_email_channel.email","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_config_key":"aws-pinpoint-primary:aws","expressions":{"application_id":{"references":["aws_pinpoint_app.this"]},"from_address":{"references":["var.from_address"]},"identity":{"references":["var.aws_ses_domain_identity_arn"]},"role_arn":{"references":["module.iam-role.arn"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.this","mode":"data","type":"aws_iam_policy_document","name":"this","provider_config_key":"aws-pinpoint-primary:aws","expressions":{"statement":[{"actions":{"constant_value":["mobiletargeting:*"]},"resources":{"references":["var.region","module.common.aws_account_id"]}}]},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"iam-role":{"source":"../aws-iam-role","expressions":{"environment":{"references":["var.environment"]},"policy_document":{"references":["data.aws_iam_policy_document.this"]},"project":{"constant_value":"rap"},"service":{"constant_value":"pinpoint"},"service_principals":{"constant_value":["pinpoint.amazonaws.com"]}},"module":{"outputs":{"arn":{"expression":{"references":["aws_iam_role.default"]}},"name":{"expression":{"references":["aws_iam_role.default"]}}},"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_config_key":"iam-role:aws","expressions":{"description":{"references":["var.project","var.environment","var.service"]},"name":{"references":["var.project","var.environment","var.service"]},"path":{"constant_value":"/"},"policy":{"references":["var.policy_document"]}},"schema_version":0},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_config_key":"iam-role:aws","expressions":{"assume_role_policy":{"references":["var.assume_role_policy","var.assume_role_policy","data.aws_iam_policy_document.assume_role_policy"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.project","var.environment","var.service"]},"tags":{"references":["module.tags.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_config_key":"iam-role:aws","expressions":{"policy_arn":{"references":["module.common.aws_account_id"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_config_key":"iam-role:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.default"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.managed","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed","provider_config_key":"iam-role:aws","expressions":{"policy_arn":{"references":["var.managed_policies","count.index"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0,"count_expression":{"references":["var.managed_policies"]}},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"iam-role:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.service_principals"]},"type":{"constant_value":"Service"}},{"identifiers":{"references":["var.aws_principals"]},"type":{"constant_value":"AWS"}}]}]},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"tags":{"source":"../aws-tags","expressions":{"name":{"references":["var.project","var.environment","var.service"]}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}},"variables":{"assume_role_policy":{"default":""},"aws_principals":{"default":[]},"environment":{},"managed_policies":{"default":[]},"policy_document":{},"project":{"default":"rap"},"service":{},"service_principals":{"default":[]}}}}},"variables":{"aws_ses_domain_identity_arn":{"description":"ARN of AWS SES domain identity"},"environment":{"default":"prod","description":"Environment name"},"from_address":{"description":"Email address that emails will be sent from."},"name":{"description":"The name of the AWS Pinpoint endpoint."},"region":{"default":"eu-west-1","description":"AWS Region"}}}},"aws-pinpoint-secondary":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-pinpoint","expressions":{"aws_ses_domain_identity_arn":{"references":["module.aws-ses-secondary.domain_identity_arn"]},"environment":{"constant_value":"secondary"},"from_address":{"references":["module.aws-ses-secondary.zone_name"]},"name":{"references":["module.aws-ses-secondary.zone_name"]}},"module":{"outputs":{"pinpoint":{"expression":{"references":["aws_pinpoint_app.this"]}}},"resources":[{"address":"aws_pinpoint_app.this","mode":"managed","type":"aws_pinpoint_app","name":"this","provider_config_key":"aws-pinpoint-secondary:aws","expressions":{"name":{"references":["var.name"]}},"schema_version":0},{"address":"aws_pinpoint_email_channel.email","mode":"managed","type":"aws_pinpoint_email_channel","name":"email","provider_config_key":"aws-pinpoint-secondary:aws","expressions":{"application_id":{"references":["aws_pinpoint_app.this"]},"from_address":{"references":["var.from_address"]},"identity":{"references":["var.aws_ses_domain_identity_arn"]},"role_arn":{"references":["module.iam-role.arn"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.this","mode":"data","type":"aws_iam_policy_document","name":"this","provider_config_key":"aws-pinpoint-secondary:aws","expressions":{"statement":[{"actions":{"constant_value":["mobiletargeting:*"]},"resources":{"references":["var.region","module.common.aws_account_id"]}}]},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"iam-role":{"source":"../aws-iam-role","expressions":{"environment":{"references":["var.environment"]},"policy_document":{"references":["data.aws_iam_policy_document.this"]},"project":{"constant_value":"rap"},"service":{"constant_value":"pinpoint"},"service_principals":{"constant_value":["pinpoint.amazonaws.com"]}},"module":{"outputs":{"arn":{"expression":{"references":["aws_iam_role.default"]}},"name":{"expression":{"references":["aws_iam_role.default"]}}},"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_config_key":"iam-role:aws","expressions":{"description":{"references":["var.project","var.environment","var.service"]},"name":{"references":["var.project","var.environment","var.service"]},"path":{"constant_value":"/"},"policy":{"references":["var.policy_document"]}},"schema_version":0},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_config_key":"iam-role:aws","expressions":{"assume_role_policy":{"references":["var.assume_role_policy","var.assume_role_policy","data.aws_iam_policy_document.assume_role_policy"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.project","var.environment","var.service"]},"tags":{"references":["module.tags.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_config_key":"iam-role:aws","expressions":{"policy_arn":{"references":["module.common.aws_account_id"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_config_key":"iam-role:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.default"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.managed","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed","provider_config_key":"iam-role:aws","expressions":{"policy_arn":{"references":["var.managed_policies","count.index"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0,"count_expression":{"references":["var.managed_policies"]}},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"iam-role:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.service_principals"]},"type":{"constant_value":"Service"}},{"identifiers":{"references":["var.aws_principals"]},"type":{"constant_value":"AWS"}}]}]},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"tags":{"source":"../aws-tags","expressions":{"name":{"references":["var.project","var.environment","var.service"]}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}},"variables":{"assume_role_policy":{"default":""},"aws_principals":{"default":[]},"environment":{},"managed_policies":{"default":[]},"policy_document":{},"project":{"default":"rap"},"service":{},"service_principals":{"default":[]}}}}},"variables":{"aws_ses_domain_identity_arn":{"description":"ARN of AWS SES domain identity"},"environment":{"default":"prod","description":"Environment name"},"from_address":{"description":"Email address that emails will be sent from."},"name":{"description":"The name of the AWS Pinpoint endpoint."},"region":{"default":"eu-west-1","description":"AWS Region"}}}},"aws-ses-primary":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-ses","module":{"outputs":{"domain_identity_arn":{"expression":{"references":["aws_ses_domain_identity.this"]}},"zone_id":{"expression":{"references":["data.aws_ssm_parameter.zone_id"]}},"zone_name":{"expression":{"references":["data.aws_ssm_parameter.zone_name"]}}},"resources":[{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","provider_config_key":"aws-ses-primary:aws","expressions":{"name":{"references":["aws_ses_domain_dkim.this","count.index","data.aws_ssm_parameter.zone_name"]},"records":{"references":["aws_ses_domain_dkim.this","count.index"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"CNAME"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2,"count_expression":{"constant_value":3}},{"address":"aws_route53_record.mail_from_mx","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_config_key":"aws-ses-primary:aws","expressions":{"name":{"references":["aws_ses_domain_mail_from.this"]},"records":{"references":["var.region"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"MX"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2},{"address":"aws_route53_record.mail_from_txt","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_config_key":"aws-ses-primary:aws","expressions":{"name":{"references":["aws_ses_domain_mail_from.this"]},"records":{"constant_value":["v=spf1 include:amazonses.com -all"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"TXT"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2},{"address":"aws_route53_record.verification_record","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_config_key":"aws-ses-primary:aws","expressions":{"name":{"references":["data.aws_ssm_parameter.zone_name"]},"records":{"references":["aws_ses_domain_identity.this"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"TXT"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2},{"address":"aws_ses_domain_dkim.this","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_config_key":"aws-ses-primary:aws","expressions":{"domain":{"references":["data.aws_ssm_parameter.zone_name"]}},"schema_version":0},{"address":"aws_ses_domain_identity.this","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_config_key":"aws-ses-primary:aws","expressions":{"domain":{"references":["data.aws_ssm_parameter.zone_name"]}},"schema_version":0},{"address":"aws_ses_domain_identity_verification.this","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_config_key":"aws-ses-primary:aws","expressions":{"domain":{"references":["aws_ses_domain_identity.this"]}},"schema_version":0,"depends_on":["aws_route53_record.verification_record"]},{"address":"aws_ses_domain_mail_from.this","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_config_key":"aws-ses-primary:aws","expressions":{"domain":{"references":["aws_ses_domain_identity.this"]},"mail_from_domain":{"references":["aws_ses_domain_identity.this"]}},"schema_version":0},{"address":"data.aws_ssm_parameter.zone_id","mode":"data","type":"aws_ssm_parameter","name":"zone_id","provider_config_key":"aws-ses-primary:aws","expressions":{"name":{"constant_value":"/edf/rap/hosted_zone_id"}},"schema_version":0},{"address":"data.aws_ssm_parameter.zone_name","mode":"data","type":"aws_ssm_parameter","name":"zone_name","provider_config_key":"aws-ses-primary:aws","expressions":{"name":{"constant_value":"/edf/rap/hosted_zone_name"}},"schema_version":0}],"variables":{"region":{"default":"eu-west-1","description":"AWS Region"}}}},"aws-ses-secondary":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-ses","module":{"outputs":{"domain_identity_arn":{"expression":{"references":["aws_ses_domain_identity.this"]}},"zone_id":{"expression":{"references":["data.aws_ssm_parameter.zone_id"]}},"zone_name":{"expression":{"references":["data.aws_ssm_parameter.zone_name"]}}},"resources":[{"address":"aws_route53_record.dkim_record","mode":"managed","type":"aws_route53_record","name":"dkim_record","provider_config_key":"aws-ses-secondary:aws","expressions":{"name":{"references":["aws_ses_domain_dkim.this","count.index","data.aws_ssm_parameter.zone_name"]},"records":{"references":["aws_ses_domain_dkim.this","count.index"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"CNAME"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2,"count_expression":{"constant_value":3}},{"address":"aws_route53_record.mail_from_mx","mode":"managed","type":"aws_route53_record","name":"mail_from_mx","provider_config_key":"aws-ses-secondary:aws","expressions":{"name":{"references":["aws_ses_domain_mail_from.this"]},"records":{"references":["var.region"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"MX"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2},{"address":"aws_route53_record.mail_from_txt","mode":"managed","type":"aws_route53_record","name":"mail_from_txt","provider_config_key":"aws-ses-secondary:aws","expressions":{"name":{"references":["aws_ses_domain_mail_from.this"]},"records":{"constant_value":["v=spf1 include:amazonses.com -all"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"TXT"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2},{"address":"aws_route53_record.verification_record","mode":"managed","type":"aws_route53_record","name":"verification_record","provider_config_key":"aws-ses-secondary:aws","expressions":{"name":{"references":["data.aws_ssm_parameter.zone_name"]},"records":{"references":["aws_ses_domain_identity.this"]},"ttl":{"constant_value":"600"},"type":{"constant_value":"TXT"},"zone_id":{"references":["data.aws_ssm_parameter.zone_id"]}},"schema_version":2},{"address":"aws_ses_domain_dkim.this","mode":"managed","type":"aws_ses_domain_dkim","name":"this","provider_config_key":"aws-ses-secondary:aws","expressions":{"domain":{"references":["data.aws_ssm_parameter.zone_name"]}},"schema_version":0},{"address":"aws_ses_domain_identity.this","mode":"managed","type":"aws_ses_domain_identity","name":"this","provider_config_key":"aws-ses-secondary:aws","expressions":{"domain":{"references":["data.aws_ssm_parameter.zone_name"]}},"schema_version":0},{"address":"aws_ses_domain_identity_verification.this","mode":"managed","type":"aws_ses_domain_identity_verification","name":"this","provider_config_key":"aws-ses-secondary:aws","expressions":{"domain":{"references":["aws_ses_domain_identity.this"]}},"schema_version":0,"depends_on":["aws_route53_record.verification_record"]},{"address":"aws_ses_domain_mail_from.this","mode":"managed","type":"aws_ses_domain_mail_from","name":"this","provider_config_key":"aws-ses-secondary:aws","expressions":{"domain":{"references":["aws_ses_domain_identity.this"]},"mail_from_domain":{"references":["aws_ses_domain_identity.this"]}},"schema_version":0},{"address":"data.aws_ssm_parameter.zone_id","mode":"data","type":"aws_ssm_parameter","name":"zone_id","provider_config_key":"aws-ses-secondary:aws","expressions":{"name":{"constant_value":"/edf/rap/hosted_zone_id"}},"schema_version":0},{"address":"data.aws_ssm_parameter.zone_name","mode":"data","type":"aws_ssm_parameter","name":"zone_name","provider_config_key":"aws-ses-secondary:aws","expressions":{"name":{"constant_value":"/edf/rap/hosted_zone_name"}},"schema_version":0}],"variables":{"region":{"default":"eu-west-1","description":"AWS Region"}}}},"firehose-for-cloudwatch":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-firehose","expressions":{"bucket_obj_prefix":{"constant_value":"baseFolder/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/"},"environment":{"constant_value":"control-plane"},"error_output_prefix":{"constant_value":"myErrorPrefix/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/!{firehose:error-output-type}"},"firehose_iam_role_arn":{"references":["module.iam-role-firehose-to-s3.arn"]},"firehose_s3_bucket_arn":{"references":["module.s3.arn"]},"name":{"constant_value":"firehose-cloudwatch"}},"module":{"outputs":{"obj":{"expression":{"references":["aws_kinesis_firehose_delivery_stream.this"]}}},"resources":[{"address":"aws_cloudwatch_log_group.firehose_s3_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"firehose_s3_log_group","provider_config_key":"firehose-for-cloudwatch:aws","expressions":{"name":{"references":["var.company","var.project","var.name","var.environment","var.role"]},"retention_in_days":{"constant_value":30},"tags":{"references":["module.firehose_tags.tags"]}},"schema_version":0},{"address":"aws_cloudwatch_log_stream.firehose_s3_log_stream","mode":"managed","type":"aws_cloudwatch_log_stream","name":"firehose_s3_log_stream","provider_config_key":"firehose-for-cloudwatch:aws","expressions":{"log_group_name":{"references":["aws_cloudwatch_log_group.firehose_s3_log_group"]},"name":{"constant_value":"DeliveryStream"}},"schema_version":0},{"address":"aws_kinesis_firehose_delivery_stream.this","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"this","provider_config_key":"firehose-for-cloudwatch:aws","expressions":{"destination":{"constant_value":"extended_s3"},"extended_s3_configuration":[{"bucket_arn":{"references":["var.firehose_s3_bucket_arn"]},"buffer_interval":{"references":["var.buffer_interval"]},"buffer_size":{"references":["var.buffer_size"]},"cloudwatch_logging_options":[{"enabled":{"constant_value":"true"},"log_group_name":{"references":["aws_cloudwatch_log_group.firehose_s3_log_group"]},"log_stream_name":{"references":["aws_cloudwatch_log_stream.firehose_s3_log_stream"]}}],"error_output_prefix":{"references":["var.error_output_prefix"]},"prefix":{"references":["local.bucket_obj_prefix"]},"role_arn":{"references":["var.firehose_iam_role_arn"]}}],"name":{"references":["var.company","var.project","var.name","var.environment"]},"tags":{"references":["module.firehose_tags.tags"]}},"schema_version":1}],"module_calls":{"firehose_tags":{"source":"../aws-tags","expressions":{"name":{"references":["var.company","var.project","var.name","var.environment"]}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}},"variables":{"bucket_obj_prefix":{"default":"","description":"The object prefix that will be used within the S3 bucket"},"buffer_interval":{"default":60,"description":"Buffer incoming data for the specified period of time, in seconds, before delivering it to the destination."},"buffer_size":{"default":5,"description":"Buffer incoming data to the specified size, in MBs, before delivering it to the destination. We recommend setting SizeInMBs to a value greater than the amount of data you typically ingest into the delivery stream in 10 seconds. For example, if you typically ingest data at 1 MB/sec set SizeInMBs to be 10 MB or higher."},"company":{"default":"edf","description":"Name of the company"},"environment":{"description":"Name of environment (i.e. primary, secondary, primary-data, secondary-data)"},"error_output_prefix":{"default":"myErrorPrefix/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/hour=!{timestamp:HH}/!{firehose:error-output-type}","description":"Error output prefix for S3 buckets"},"firehose_iam_role_arn":{"description":"IAM Role that is used in Firehose Service"},"firehose_s3_bucket_arn":{"default":"The s3 bucket used by the Firehose Service"},"kinesis_stream_arn":{"default":"","description":"ARN of Kinesis Stream"},"lambda_processor_arn":{"default":"","description":"ARN of the Lambda function that will do the processing"},"name":{"description":"Name suffix of the service"},"project":{"default":"rap","description":"Name of project"},"role":{"default":"firehose","description":"Role of the module (i.e. s3-bucket, firehose, etc.)"}}}},"iam-role-cloudwatch-to-firehose":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-iam-role","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.cloudwatch_firehose_trust"]},"environment":{"constant_value":"control-plane"},"policy_document":{"references":["data.aws_iam_policy_document.cloudwatch_firehose_policy"]},"service":{"constant_value":"cloudwatch-to-firehose"}},"module":{"outputs":{"arn":{"expression":{"references":["aws_iam_role.default"]}},"name":{"expression":{"references":["aws_iam_role.default"]}}},"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_config_key":"iam-role-cloudwatch-to-firehose:aws","expressions":{"description":{"references":["var.project","var.environment","var.service"]},"name":{"references":["var.project","var.environment","var.service"]},"path":{"constant_value":"/"},"policy":{"references":["var.policy_document"]}},"schema_version":0},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_config_key":"iam-role-cloudwatch-to-firehose:aws","expressions":{"assume_role_policy":{"references":["var.assume_role_policy","var.assume_role_policy","data.aws_iam_policy_document.assume_role_policy"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.project","var.environment","var.service"]},"tags":{"references":["module.tags.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_config_key":"iam-role-cloudwatch-to-firehose:aws","expressions":{"policy_arn":{"references":["module.common.aws_account_id"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_config_key":"iam-role-cloudwatch-to-firehose:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.default"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.managed","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed","provider_config_key":"iam-role-cloudwatch-to-firehose:aws","expressions":{"policy_arn":{"references":["var.managed_policies","count.index"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0,"count_expression":{"references":["var.managed_policies"]}},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"iam-role-cloudwatch-to-firehose:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.service_principals"]},"type":{"constant_value":"Service"}},{"identifiers":{"references":["var.aws_principals"]},"type":{"constant_value":"AWS"}}]}]},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"tags":{"source":"../aws-tags","expressions":{"name":{"references":["var.project","var.environment","var.service"]}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}},"variables":{"assume_role_policy":{"default":""},"aws_principals":{"default":[]},"environment":{},"managed_policies":{"default":[]},"policy_document":{},"project":{"default":"rap"},"service":{},"service_principals":{"default":[]}}}},"iam-role-firehose-to-lambda":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-iam-role","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.firehose_lambda_trust"]},"environment":{"constant_value":"control-plane"},"policy_document":{"references":["data.aws_iam_policy_document.firehose_lambda_policy"]},"service":{"constant_value":"firehose-to-lambda"}},"module":{"outputs":{"arn":{"expression":{"references":["aws_iam_role.default"]}},"name":{"expression":{"references":["aws_iam_role.default"]}}},"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_config_key":"iam-role-firehose-to-lambda:aws","expressions":{"description":{"references":["var.project","var.environment","var.service"]},"name":{"references":["var.project","var.environment","var.service"]},"path":{"constant_value":"/"},"policy":{"references":["var.policy_document"]}},"schema_version":0},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_config_key":"iam-role-firehose-to-lambda:aws","expressions":{"assume_role_policy":{"references":["var.assume_role_policy","var.assume_role_policy","data.aws_iam_policy_document.assume_role_policy"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.project","var.environment","var.service"]},"tags":{"references":["module.tags.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_config_key":"iam-role-firehose-to-lambda:aws","expressions":{"policy_arn":{"references":["module.common.aws_account_id"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_config_key":"iam-role-firehose-to-lambda:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.default"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.managed","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed","provider_config_key":"iam-role-firehose-to-lambda:aws","expressions":{"policy_arn":{"references":["var.managed_policies","count.index"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0,"count_expression":{"references":["var.managed_policies"]}},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"iam-role-firehose-to-lambda:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.service_principals"]},"type":{"constant_value":"Service"}},{"identifiers":{"references":["var.aws_principals"]},"type":{"constant_value":"AWS"}}]}]},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"tags":{"source":"../aws-tags","expressions":{"name":{"references":["var.project","var.environment","var.service"]}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}},"variables":{"assume_role_policy":{"default":""},"aws_principals":{"default":[]},"environment":{},"managed_policies":{"default":[]},"policy_document":{},"project":{"default":"rap"},"service":{},"service_principals":{"default":[]}}}},"iam-role-firehose-to-s3":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-iam-role","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.firehose_s3_trust"]},"environment":{"constant_value":"control-plane"},"policy_document":{"references":["data.aws_iam_policy_document.firehose_s3_policy"]},"service":{"constant_value":"firehose-to-s3"}},"module":{"outputs":{"arn":{"expression":{"references":["aws_iam_role.default"]}},"name":{"expression":{"references":["aws_iam_role.default"]}}},"resources":[{"address":"aws_iam_policy.default","mode":"managed","type":"aws_iam_policy","name":"default","provider_config_key":"iam-role-firehose-to-s3:aws","expressions":{"description":{"references":["var.project","var.environment","var.service"]},"name":{"references":["var.project","var.environment","var.service"]},"path":{"constant_value":"/"},"policy":{"references":["var.policy_document"]}},"schema_version":0},{"address":"aws_iam_role.default","mode":"managed","type":"aws_iam_role","name":"default","provider_config_key":"iam-role-firehose-to-s3:aws","expressions":{"assume_role_policy":{"references":["var.assume_role_policy","var.assume_role_policy","data.aws_iam_policy_document.assume_role_policy"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.project","var.environment","var.service"]},"tags":{"references":["module.tags.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.edf-enforced","mode":"managed","type":"aws_iam_role_policy_attachment","name":"edf-enforced","provider_config_key":"iam-role-firehose-to-s3:aws","expressions":{"policy_arn":{"references":["module.common.aws_account_id"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.inline","mode":"managed","type":"aws_iam_role_policy_attachment","name":"inline","provider_config_key":"iam-role-firehose-to-s3:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.default"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.managed","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed","provider_config_key":"iam-role-firehose-to-s3:aws","expressions":{"policy_arn":{"references":["var.managed_policies","count.index"]},"role":{"references":["aws_iam_role.default"]}},"schema_version":0,"count_expression":{"references":["var.managed_policies"]}},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"iam-role-firehose-to-s3:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.service_principals"]},"type":{"constant_value":"Service"}},{"identifiers":{"references":["var.aws_principals"]},"type":{"constant_value":"AWS"}}]}]},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"tags":{"source":"../aws-tags","expressions":{"name":{"references":["var.project","var.environment","var.service"]}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}},"variables":{"assume_role_policy":{"default":""},"aws_principals":{"default":[]},"environment":{},"managed_policies":{"default":[]},"policy_document":{},"project":{"default":"rap"},"service":{},"service_principals":{"default":[]}}}},"lambda-tags":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-tags","expressions":{"name":{"constant_value":"Lambda Function"}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}},"s3":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-s3","expressions":{"environment":{"constant_value":"control-plane"},"name":{"constant_value":"edf-cloudwatch-from-firehose"},"prevent_destroy":{"constant_value":false}},"module":{"outputs":{"arn":{"expression":{"references":["local.arn"]}},"id":{"expression":{"references":["local.name"]}},"kms_key_id":{"expression":{"references":["local.kms_key_id"]}}},"resources":[{"address":"aws_kms_key.key","mode":"managed","type":"aws_kms_key","name":"key","provider_config_key":"s3:aws","expressions":{"deletion_window_in_days":{"constant_value":7},"description":{"references":["local.name"]},"enable_key_rotation":{"constant_value":true},"tags":{"references":["module.tags.tags"]}},"schema_version":0,"count_expression":{"references":["local.create_kms_key"]}},{"address":"aws_s3_bucket.s3_bucket_dev","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket_dev","provider_config_key":"s3:aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.name"]},"lifecycle_rule":[{"enabled":{"references":["var.lifecycle_ia_transition_enabled"]},"id":{"constant_value":"transition-to-ia"},"transition":[{"days":{"references":["var.lifecycle_days_to_ia_transition"]},"storage_class":{"constant_value":"STANDARD_IA"}}]},{"enabled":{"references":["var.lifecycle_glacier_transition_enabled"]},"id":{"constant_value":"transition-to-glacier"},"transition":[{"days":{"references":["var.lifecycle_days_to_glacier_transition"]},"storage_class":{"constant_value":"GLACIER"}}]}],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.key[0]"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]}],"tags":{"references":["module.tags.tags"]},"versioning":[{"enabled":{"constant_value":true},"mfa_delete":{"references":["var.mfa_delete"]}}]},"schema_version":0,"count_expression":{"references":["var.prevent_destroy"]}},{"address":"aws_s3_bucket.s3_bucket_prod","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket_prod","provider_config_key":"s3:aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.name"]},"lifecycle_rule":[{"enabled":{"references":["var.lifecycle_ia_transition_enabled"]},"id":{"constant_value":"transition-to-ia"},"transition":[{"days":{"references":["var.lifecycle_days_to_ia_transition"]},"storage_class":{"constant_value":"STANDARD_IA"}}]},{"enabled":{"references":["var.lifecycle_glacier_transition_enabled"]},"id":{"constant_value":"transition-to-glacier"},"transition":[{"days":{"references":["var.lifecycle_days_to_glacier_transition"]},"storage_class":{"constant_value":"GLACIER"}}]}],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.key[0]"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]}],"tags":{"references":["module.tags.tags"]},"versioning":[{"enabled":{"constant_value":true},"mfa_delete":{"references":["var.mfa_delete"]}}]},"schema_version":0,"count_expression":{"references":["var.prevent_destroy"]}},{"address":"aws_s3_bucket_public_access_block.public_access_block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"public_access_block","provider_config_key":"s3:aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["var.prevent_destroy","aws_s3_bucket.s3_bucket_prod[0]","aws_s3_bucket.s3_bucket_dev[0]"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0}],"module_calls":{"common":{"source":"../common","module":{"outputs":{"aws_account_id":{"expression":{"references":["data.aws_caller_identity.current"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"common:aws","schema_version":0}]}},"tags":{"source":"../aws-tags","expressions":{"environment":{"references":["var.environment"]},"name":{"references":["var.name"]},"tags":{"constant_value":{"Compliance":"GDPR","Data Classification":"PROTECT - PRIVATE","Data Residency":"EU"}}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}},"variables":{"environment":{"default":"dev","description":"Environment definition for the bucket (dev,prod)"},"kms_key_id":{"default":"","description":"The KMS Key ID that will be used for the Bucket. (A new one will be created if not supplied)"},"lifecycle_days_to_glacier_transition":{"default":"365","description":"Specifies the number of days after object creation when it will be moved to Glacier storage."},"lifecycle_days_to_ia_transition":{"default":"180","description":"Specifies the number of days after object creation when it will be moved to standard infrequent access storage."},"lifecycle_glacier_transition_enabled":{"default":"false","description":"Specifies Glacier transition lifecycle rule status."},"lifecycle_ia_transition_enabled":{"default":"false","description":"Specifies infrequent storage transition lifecycle rule status."},"mfa_delete":{"default":false,"description":"The flag that defines if MFA authentication is required to execute any delete operations within S3 bucket and the objects"},"name":{"description":"The name of the bucket. Must follow [A-Za-z0-9\\-]+ pattern."},"prevent_destroy":{"default":true,"description":"The flag that defines if the S3 Bucket is allowed to be destroyed programmatically"}}}},"sns-tags":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-tags","expressions":{"name":{"constant_value":"SNS Topic"}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}},"ssm-tags":{"source":"git::ssh://git@github.com/contino/edf-rap-terraform-modules.git//aws-tags","expressions":{"name":{"constant_value":"SSM Variable"}},"module":{"outputs":{"tags":{"expression":{"references":["local.merged_tags"]},"description":"Map of tags"}},"variables":{"business_unit":{"default":"Customers","description":"EDFE :: Business Unit"},"cost_centre":{"default":"KCOU","description":"EDFE :: Cost Centre"},"creator":{"default":"Terraform via CD Pipeline","description":"EDFE :: Creator of the Resource"},"edfe_environment":{"default":"Production","description":"EDFE :: Environment"},"environment":{"default":"dev","description":"Used to distinguish between dev and prod infrastructure"},"major_function":{"default":"Business_Change_and_IT","description":"EDFE :: Major Function"},"name":{"description":"The name for the resource"},"project":{"default":"rap","description":"Used to identify the project"},"service":{"default":"RAP","description":"EDFE :: Service (same as Project)"},"service_level":{"default":"Platinum","description":"EDFE :: Service Level"},"tags":{"default":{},"description":"Tags to be merged with the default tag map"},"work_order":{"default":"KCOU","description":"EDFE :: Work Order"}}}}}}}}
