---
layout: default
title: Usage
nav_order: 3
has_children: false
---

# Usage

Only for ~>1.* versions
{: .label }

Independent from how you [install](/pages/installation) `terraform-compliance`, you need to provide some of the
cli parameters.

```shell 
[~] $ terraform-compliance -h

  terraform-compliance v1.0.0 initiated
  
  usage: terraform-compliance [-h] --features feature directory --planfile
                              plan_file [--identity [ssh private key]]
                              [--version]
  
  BDD Test Framework for Hashicorp terraform
  
  optional arguments:
    -h, --help            show this help message and exit
    --features feature directory, -f feature directory
                          Directory (or git repository with 'git:' prefix)
                          consists of BDD features
    --planfile plan_file, -p plan_file
                          Plan output file generated by Terraform
    --identity [ssh private key], -i [ssh private key]
                          SSH Private key that will be use on git
                          authentication.
    --terraform [terraform_file], -t [terraform_file]
                            The absolute path to the terraform executable.
    --version, -v         show program's version number and exit
```

## CLI Reference

### -f / --features
REQUIRED
{: .label .label-red}

This parameter is used to provide feature files to `terraform-compliance`. It must be a directory or a git repository.
All files within the directory (or repository) will be processed non-recursively.

```shell
[~] $ terraform-compliance -f /path/to/feature/files/ ...
```

or for a `git` repository ; (highly recommended for segregation of duties and having immutable features!)

If the repository is a public repository ;

```shell
[~] $ terraform-compliance -f git:https://github.com/user/repo ...
```

or if the repository is a private repository ;

```shell
[~] $ terraform-compliance -f git:ssh://github.com/user/repo.git ...
```

The authentication to that git repository will be handled via your `~/.ssh/config`. If you are using a different
ssh key for this repository then you also need to provide `-i` parameter to pointing your private key.

### -p / --planfile
REQUIRED
{: .label .label-red}

`terraform-compliance` requires a `plan` or `state` output to run against. In order to create this plan file, you 
can run terraform ;

```shell
[~] $ terraform plan -out=plan.out
```

then you can provide this `plan.out` to `terraform-compliance` via ;

```shell
[~] $ terraform-compliance -p plan.out ...
```

`terraform-compliance` also supports parsing your `state` files. Your state file might be in your local, or in a
remote entity. In order to download your state file ;

```shell
[~] $ terraform state pull > state.out
```

and then you can run your features against this `state.out` file via ;

```shell
[~] $ terraform-compliance -p state.out ...
```

### -i / --identity
OPTIONAL
{: .label .label-yellow}

In case you need to authenticate to a private git repository as also described in `-f` parameter, then you may
need to provide a private ssh key.

You can use `-i` parameter to do that ;

```shell
[~] $ terraform-compliance -i /path/to/ssh/private/key ...
```

Please note that, if the host that you are trying to authenticate already defined in `~/ssh/config`, then 
`terraform-compliance` will use that key for authentication.

### -t  / --terraform
OPTIONAL
{: .label .label-yellow}

In some cases, a `plan` file that is created by a specific version of `terraform` might require the same version
of that `terraform` in order to process that. `terraform-compliance` uses `terraform` in order to parse any plan/state
files that has been created. In these cases you can just provide the same version of `terraform` via ;

```shell
[~] $ terraform-compliance -t /path/to/specific/versin/of/terraform ...
```
